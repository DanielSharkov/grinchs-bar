var In=Object.defineProperty;var Et=e=>{throw TypeError(e)};var xn=(e,r,t)=>r in e?In(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var At=(e,r,t)=>xn(e,typeof r!="symbol"?r+"":r,t),$t=(e,r,t)=>r.has(e)||Et("Cannot "+t);var F=(e,r,t)=>($t(e,r,"read from private field"),t?t.call(e):r.get(e)),Pr=(e,r,t)=>r.has(e)?Et("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t);var Or=(e,r,t)=>($t(e,r,"access private method"),t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();const Mn=!1;var Ht=Array.isArray,rt=Array.from,Bn=Object.defineProperty,St=Object.getOwnPropertyDescriptor,jt=Object.getOwnPropertyDescriptors,Mr=Object.getPrototypeOf;function Rn(e){return typeof e=="function"}const ae=()=>{};function Gn(e){return e()}function Br(e){for(var r=0;r<e.length;r++)e[r]()}const pe=2,zt=4,Qe=8,wr=16,de=32,br=64,Oe=128,vr=256,U=512,Ae=1024,Fe=2048,le=4096,Xe=8192,Ut=16384,Er=32768,Nn=1<<18,Kt=1<<19,Ct=Symbol("$state");function Yt(e){return e===this.v}function Jt(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function Zt(e){return!Jt(e,this.v)}function Dn(e){throw new Error("effect_in_teardown")}function qn(){throw new Error("effect_in_unowned_derived")}function Ln(e){throw new Error("effect_orphan")}function Fn(){throw new Error("effect_update_depth_exceeded")}function Vn(){throw new Error("state_unsafe_local_read")}function Wn(){throw new Error("state_unsafe_mutation")}let Ar=!1;function Hn(){Ar=!0}function pr(e){return{f:0,v:e,reactions:null,equals:Yt,version:0}}function tt(e,r=!1){var n;const t=pr(e);return r||(t.equals=Zt),Ar&&x!==null&&x.l!==null&&((n=x.l).s??(n.s=[])).push(t),t}function nt(e,r=!1){return jn(tt(e,r))}function jn(e){return C!==null&&C.f&pe&&(ue===null?oa([e]):ue.push(e)),e}function er(e,r){return C!==null&&_t()&&C.f&(pe|wr)&&(ue===null||!ue.includes(e))&&Wn(),Rr(e,r)}function Rr(e,r){return e.equals(r)||(e.v=r,e.version=gn(),Qt(e,Ae),_t()&&$!==null&&$.f&U&&!($.f&de)&&(V!==null&&V.includes(e)?(ie($,Ae),Cr($)):be===null?la([e]):be.push(e))),r}function Qt(e,r){var t=e.reactions;if(t!==null)for(var n=_t(),a=t.length,i=0;i<a;i++){var s=t[i],l=s.f;l&Ae||!n&&s===$||(ie(s,r),l&(U|Oe)&&(l&pe?Qt(s,Fe):Cr(s)))}}const at=1,it=2,Xt=4,zn=8,Un=16,Kn=1,Yn=2,Jn=4,Zn=1,Qn=2;let Xn=!1;var Gr,en,rn,tn;function ea(){if(Gr===void 0){Gr=window,en=document;var e=Element.prototype,r=Node.prototype;rn=St(r,"firstChild").get,tn=St(r,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function st(e=""){return document.createTextNode(e)}function _r(e){return rn.call(e)}function $r(e){return tn.call(e)}function S(e,r){return _r(e)}function $e(e,r){{var t=_r(e);return t instanceof Comment&&t.data===""?$r(t):t}}function P(e,r=1,t=!1){let n=e;for(;r--;)n=$r(n);return n}function ra(e){e.textContent=""}function nn(e){var r=pe|Ae;$===null?r|=Oe:$.f|=Kt;const t={children:null,ctx:x,deps:null,equals:Yt,f:r,fn:e,reactions:null,v:null,version:0,parent:$};if(C!==null&&C.f&pe){var n=C;(n.children??(n.children=[])).push(t)}return t}function kt(e){const r=nn(e);return r.equals=Zt,r}function an(e){var r=e.children;if(r!==null){e.children=null;for(var t=0;t<r.length;t+=1){var n=r[t];n.f&pe?ot(n):Te(n)}}}function sn(e){var r,t=$;fe(e.parent);try{an(e),r=mn(e)}finally{fe(t)}return r}function on(e){var r=sn(e),t=(De||e.f&Oe)&&e.deps!==null?Fe:U;ie(e,t),e.equals(r)||(e.v=r,e.version=gn())}function ot(e){an(e),Ye(e,0),ie(e,Xe),e.v=e.children=e.deps=e.ctx=e.reactions=null}function ln(e){$===null&&C===null&&Ln(),C!==null&&C.f&Oe&&qn(),pt&&Dn()}function ta(e,r){var t=r.last;t===null?r.last=r.first=e:(t.next=e,e.prev=t,r.last=e)}function Ve(e,r,t,n=!0){var a=(e&br)!==0,i=$,s={ctx:x,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|Ae,first:null,fn:r,last:null,next:null,parent:a?null:i,prev:null,teardown:null,transitions:null,version:0};if(t){var l=qe;try{Ot(!0),rr(s),s.f|=Ut}catch(u){throw Te(s),u}finally{Ot(l)}}else r!==null&&Cr(s);var c=t&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&Kt)===0;if(!c&&!a&&n&&(i!==null&&ta(s,i),C!==null&&C.f&pe)){var f=C;(f.children??(f.children=[])).push(s)}return s}function un(e){const r=Ve(Qe,null,!1);return ie(r,U),r.teardown=e,r}function Pt(e){ln();var r=$!==null&&($.f&de)!==0&&x!==null&&!x.m;if(r){var t=x;(t.e??(t.e=[])).push({fn:e,effect:$,reaction:C})}else{var n=Sr(e);return n}}function na(e){return ln(),ct(e)}function aa(e){const r=Ve(br,e,!0);return()=>{Te(r)}}function Sr(e){return Ve(zt,e,!1)}function lt(e,r){var t=x,n={effect:null,ran:!1};t.l.r1.push(n),n.effect=ct(()=>{e(),!n.ran&&(n.ran=!0,er(t.l.r2,!0),tr(r))})}function ut(){var e=x;ct(()=>{if(b(e.l.r2)){for(var r of e.l.r1){var t=r.effect;t.f&U&&ie(t,Fe),We(t)&&rr(t),r.ran=!1}e.l.r2.v=!1}})}function ct(e){return Ve(Qe,e,!0)}function oe(e){return ft(e)}function ft(e,r=0){return Ve(Qe|wr|r,e,!0)}function Ke(e,r=!0){return Ve(Qe|de,e,!0,r)}function cn(e){var r=e.teardown;if(r!==null){const t=pt,n=C;Tt(!0),ce(null);try{r.call(null)}finally{Tt(t),ce(n)}}}function fn(e){var r=e.deriveds;if(r!==null){e.deriveds=null;for(var t=0;t<r.length;t+=1)ot(r[t])}}function dn(e,r=!1){var t=e.first;for(e.first=e.last=null;t!==null;){var n=t.next;Te(t,r),t=n}}function ia(e){for(var r=e.first;r!==null;){var t=r.next;r.f&de||Te(r),r=t}}function Te(e,r=!0){var t=!1;if((r||e.f&Nn)&&e.nodes_start!==null){for(var n=e.nodes_start,a=e.nodes_end;n!==null;){var i=n===a?null:$r(n);n.remove(),n=i}t=!0}dn(e,r&&!t),fn(e),Ye(e,0),ie(e,Xe);var s=e.transitions;if(s!==null)for(const c of s)c.stop();cn(e);var l=e.parent;l!==null&&l.first!==null&&vn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.parent=e.fn=e.nodes_start=e.nodes_end=null}function vn(e){var r=e.parent,t=e.prev,n=e.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),r!==null&&(r.first===e&&(r.first=n),r.last===e&&(r.last=t))}function Nr(e,r){var t=[];dt(e,t,!0),pn(t,()=>{Te(e),r&&r()})}function pn(e,r){var t=e.length;if(t>0){var n=()=>--t||r();for(var a of e)a.out(n)}else r()}function dt(e,r,t){if(!(e.f&le)){if(e.f^=le,e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&r.push(s);for(var n=e.first;n!==null;){var a=n.next,i=(n.f&Er)!==0||(n.f&de)!==0;dt(n,r,i?t:!1),n=a}}}function hr(e){_n(e,!0)}function _n(e,r){if(e.f&le){We(e)&&rr(e),e.f^=le;for(var t=e.first;t!==null;){var n=t.next,a=(t.f&Er)!==0||(t.f&de)!==0;_n(t,a?r:!1),t=n}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||r)&&i.in()}}let Dr=!1,qr=[];function sa(){Dr=!1;const e=qr.slice();qr=[],Br(e)}function vt(e){Dr||(Dr=!0,queueMicrotask(sa)),qr.push(e)}let gr=!1,qe=!1,pt=!1;function Ot(e){qe=e}function Tt(e){pt=e}let Lr=[],ze=0;let C=null;function ce(e){C=e}let $=null;function fe(e){$=e}let ue=null;function oa(e){ue=e}let V=null,Q=0,be=null;function la(e){be=e}let hn=0,De=!1,x=null;function gn(){return++hn}function _t(){return!Ar||x!==null&&x.l===null}function We(e){var s,l;var r=e.f;if(r&Ae)return!0;if(r&Fe){var t=e.deps,n=(r&Oe)!==0;if(t!==null){var a;if(r&vr){for(a=0;a<t.length;a++)((s=t[a]).reactions??(s.reactions=[])).push(e);e.f^=vr}for(a=0;a<t.length;a++){var i=t[a];if(We(i)&&on(i),n&&$!==null&&!De&&!((l=i==null?void 0:i.reactions)!=null&&l.includes(e))&&(i.reactions??(i.reactions=[])).push(e),i.version>e.version)return!0}}n||ie(e,U)}return!1}function ua(e,r,t){throw e}function mn(e){var o;var r=V,t=Q,n=be,a=C,i=De,s=ue,l=x,c=e.f;V=null,Q=0,be=null,C=c&(de|br)?null:e,De=!qe&&(c&Oe)!==0,ue=null,x=e.ctx;try{var f=(0,e.fn)(),u=e.deps;if(V!==null){var d;if(Ye(e,Q),u!==null&&Q>0)for(u.length=Q+V.length,d=0;d<V.length;d++)u[Q+d]=V[d];else e.deps=u=V;if(!De)for(d=Q;d<u.length;d++)((o=u[d]).reactions??(o.reactions=[])).push(e)}else u!==null&&Q<u.length&&(Ye(e,Q),u.length=Q);return f}finally{V=r,Q=t,be=n,C=a,De=i,ue=s,x=l}}function ca(e,r){let t=r.reactions;if(t!==null){var n=t.indexOf(e);if(n!==-1){var a=t.length-1;a===0?t=r.reactions=null:(t[n]=t[a],t.pop())}}t===null&&r.f&pe&&(V===null||!V.includes(r))&&(ie(r,Fe),r.f&(Oe|vr)||(r.f^=vr),Ye(r,0))}function Ye(e,r){var t=e.deps;if(t!==null)for(var n=r;n<t.length;n++)ca(e,t[n])}function rr(e){var r=e.f;if(!(r&Xe)){ie(e,U);var t=$;$=e;try{r&wr?ia(e):dn(e),fn(e),cn(e);var n=mn(e);e.teardown=typeof n=="function"?n:null,e.version=hn}catch(a){ua(a)}finally{$=t}}}function fa(){ze>1e3&&(ze=0,Fn()),ze++}function da(e){var r=e.length;if(r!==0){fa();var t=qe;qe=!0;try{for(var n=0;n<r;n++){var a=e[n];a.f&U||(a.f^=U);var i=[];yn(a,i),va(i)}}finally{qe=t}}}function va(e){var r=e.length;if(r!==0)for(var t=0;t<r;t++){var n=e[t];!(n.f&(Xe|le))&&We(n)&&(rr(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?vn(n):n.fn=null))}}function pa(){if(gr=!1,ze>1001)return;const e=Lr;Lr=[],da(e),gr||(ze=0)}function Cr(e){gr||(gr=!0,queueMicrotask(pa));for(var r=e;r.parent!==null;){r=r.parent;var t=r.f;if(t&(br|de)){if(!(t&U))return;r.f^=U}}Lr.push(r)}function yn(e,r){var t=e.first,n=[];e:for(;t!==null;){var a=t.f,i=(a&de)!==0,s=i&&(a&U)!==0;if(!s&&!(a&le))if(a&Qe){i?t.f^=U:We(t)&&rr(t);var l=t.first;if(l!==null){t=l;continue}}else a&zt&&n.push(t);var c=t.next;if(c===null){let d=t.parent;for(;d!==null;){if(e===d)break e;var f=d.next;if(f!==null){t=f;continue e}d=d.parent}}t=c}for(var u=0;u<n.length;u++)l=n[u],r.push(l),yn(l,r)}function b(e){var l;var r=e.f,t=(r&pe)!==0;if(t&&r&Xe){var n=sn(e);return ot(e),n}if(C!==null){ue!==null&&ue.includes(e)&&Vn();var a=C.deps;V===null&&a!==null&&a[Q]===e?Q++:V===null?V=[e]:V.push(e),be!==null&&$!==null&&$.f&U&&!($.f&de)&&be.includes(e)&&(ie($,Ae),Cr($))}else if(t&&e.deps===null){var i=e,s=i.parent;s!==null&&!((l=s.deriveds)!=null&&l.includes(i))&&(s.deriveds??(s.deriveds=[])).push(i)}return t&&(i=e,We(i)&&on(i)),e.v}function tr(e){const r=C;try{return C=null,e()}finally{C=r}}const _a=~(Ae|Fe|U);function ie(e,r){e.f=e.f&_a|r}function Se(e,r=!1,t){x={p:x,c:null,e:null,m:!1,s:e,x:null,l:null},Ar&&!r&&(x.l={s:null,u:null,r1:[],r2:pr(!1)})}function Ce(e){const r=x;if(r!==null){const s=r.e;if(s!==null){var t=$,n=C;r.e=null;try{for(var a=0;a<s.length;a++){var i=s[a];fe(i.effect),ce(i.reaction),Sr(i.fn)}}finally{fe(t),ce(n)}}x=r.p,r.m=!0}return{}}function ha(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ct in e)Fr(e);else if(!Array.isArray(e))for(let r in e){const t=e[r];typeof t=="object"&&t&&Ct in t&&Fr(t)}}}function Fr(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Fr(e[n],r)}catch{}const t=Mr(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=jt(t);for(let a in n){const i=n[a].get;if(i)try{i.call(e)}catch{}}}}}function ga(e){var r=C,t=$;ce(null),fe(null);try{return e()}finally{ce(r),fe(t)}}const ma=new Set,It=new Set;function ya(e,r,t,n){function a(i){if(n.capture||He.call(r,i),!i.cancelBubble)return ga(()=>t.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?vt(()=>{r.addEventListener(e,a,n)}):r.addEventListener(e,a,n),a}function H(e,r,t,n,a){var i={capture:n,passive:a},s=ya(e,r,t,i);(r===document.body||r===window||r===document)&&un(()=>{r.removeEventListener(e,s,i)})}function He(e){var h;var r=this,t=r.ownerDocument,n=e.type,a=((h=e.composedPath)==null?void 0:h.call(e))||[],i=a[0]||e.target,s=0,l=e.__root;if(l){var c=a.indexOf(l);if(c!==-1&&(r===document||r===window)){e.__root=r;return}var f=a.indexOf(r);if(f===-1)return;c<=f&&(s=c)}if(i=a[s]||e.target,i!==r){Bn(e,"currentTarget",{configurable:!0,get(){return i||t}});var u=C,d=$;ce(null),fe(null);try{for(var o,p=[];i!==null;){var v=i.assignedSlot||i.parentNode||i.host||null;try{var y=i["__"+n];if(y!==void 0&&!i.disabled)if(Ht(y)){var[g,...m]=y;g.apply(i,[e,...m])}else y.call(i,e)}catch(A){o?p.push(A):o=A}if(e.cancelBubble||v===r||v===null)break;i=v}if(o){for(let A of p)queueMicrotask(()=>{throw A});throw o}}finally{e.__root=r,delete e.currentTarget,ce(u),fe(d)}}}function wa(e){var r=document.createElement("template");return r.innerHTML=e,r.content}function Vr(e,r){var t=$;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=r)}function I(e,r){var t=(r&Zn)!==0,n=(r&Qn)!==0,a,i=!e.startsWith("<!>");return()=>{a===void 0&&(a=wa(i?e:"<!>"+e),t||(a=_r(a)));var s=n?document.importNode(a,!0):a.cloneNode(!0);if(t){var l=_r(s),c=s.lastChild;Vr(l,c)}else Vr(s,s);return s}}function ht(){var e=document.createDocumentFragment(),r=document.createComment(""),t=st();return e.append(r,t),Vr(r,t),e}function O(e,r){e!==null&&e.before(r)}const ba=["touchstart","touchmove"];function Ea(e){return ba.includes(e)}let Wr=!0;function Hr(e,r){var t=r==null?"":typeof r=="object"?r+"":r;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t==null?"":t+"")}function Aa(e,r){return $a(e,r)}const Ge=new Map;function $a(e,{target:r,anchor:t,props:n={},events:a,context:i,intro:s=!0}){ea();var l=new Set,c=d=>{for(var o=0;o<d.length;o++){var p=d[o];if(!l.has(p)){l.add(p);var v=Ea(p);r.addEventListener(p,He,{passive:v});var y=Ge.get(p);y===void 0?(document.addEventListener(p,He,{passive:v}),Ge.set(p,1)):Ge.set(p,y+1)}}};c(rt(ma)),It.add(c);var f=void 0,u=aa(()=>{var d=t??r.appendChild(st());return Ke(()=>{if(i){Se({});var o=x;o.c=i}a&&(n.$$events=a),Wr=s,f=e(d,n)||{},Wr=!0,i&&Ce()}),()=>{var v;for(var o of l){r.removeEventListener(o,He);var p=Ge.get(o);--p===0?(document.removeEventListener(o,He),Ge.delete(o)):Ge.set(o,p)}It.delete(c),xt.delete(f),d!==t&&((v=d.parentNode)==null||v.removeChild(d))}});return xt.set(f,u),f}let xt=new WeakMap;function X(e,r,t,n=null,a=!1){var i=e,s=null,l=null,c=null,f=a?Er:0;ft(()=>{c!==(c=!!r())&&(c?(s?hr(s):s=Ke(()=>t(i)),l&&Nr(l,()=>{l=null})):(l?hr(l):n&&(l=Ke(()=>n(i))),s&&Nr(s,()=>{s=null})))},f)}let cr=null;function mr(e,r){return r}function Sa(e,r,t,n){for(var a=[],i=r.length,s=0;s<i;s++)dt(r[s].e,a,!0);var l=i>0&&a.length===0&&t!==null;if(l){var c=t.parentNode;ra(c),c.append(t),n.clear(),me(e,r[0].prev,r[i-1].next)}pn(a,()=>{for(var f=0;f<i;f++){var u=r[f];l||(n.delete(u.k),me(e,u.prev,u.next)),Te(u.e,!l)}})}function Le(e,r,t,n,a,i=null){var s=e,l={flags:r,items:new Map,first:null},c=(r&Xt)!==0;if(c){var f=e;s=f.appendChild(st())}var u=null,d=!1;ft(()=>{var o=t(),p=Ht(o)?o:o==null?[]:rt(o),v=p.length;if(!(d&&v===0)){d=v===0;{var y=C;Ca(p,l,s,a,r,(y.f&le)!==0,n)}i!==null&&(v===0?u?hr(u):u=Ke(()=>i(s)):u!==null&&Nr(u,()=>{u=null})),t()}})}function Ca(e,r,t,n,a,i,s){var _e,ar,ir,re;var l=(a&zn)!==0,c=(a&(at|it))!==0,f=e.length,u=r.items,d=r.first,o=d,p,v=null,y,g=[],m=[],h,A,_,w;if(l)for(w=0;w<f;w+=1)h=e[w],A=s(h,w),_=u.get(A),_!==void 0&&((_e=_.a)==null||_e.measure(),(y??(y=new Set)).add(_));for(w=0;w<f;w+=1){if(h=e[w],A=s(h,w),_=u.get(A),_===void 0){var G=o?o.e.nodes_start:t;v=Pa(G,r,v,v===null?r.first:v.next,h,A,w,n,a),u.set(A,v),g=[],m=[],o=v.next;continue}if(c&&ka(_,h,w,a),_.e.f&le&&(hr(_.e),l&&((ar=_.a)==null||ar.unfix(),(y??(y=new Set)).delete(_))),_!==o){if(p!==void 0&&p.has(_)){if(g.length<m.length){var M=m[0],k;v=M.prev;var Y=g[0],J=g[g.length-1];for(k=0;k<g.length;k+=1)Mt(g[k],M,t);for(k=0;k<m.length;k+=1)p.delete(m[k]);me(r,Y.prev,J.next),me(r,v,Y),me(r,J,M),o=M,v=J,w-=1,g=[],m=[]}else p.delete(_),Mt(_,o,t),me(r,_.prev,_.next),me(r,_,v===null?r.first:v.next),me(r,v,_),v=_;continue}for(g=[],m=[];o!==null&&o.k!==A;)(i||!(o.e.f&le))&&(p??(p=new Set)).add(o),m.push(o),o=o.next;if(o===null)continue;_=o}g.push(_),v=_,o=_.next}if(o!==null||p!==void 0){for(var L=p===void 0?[]:rt(p);o!==null;)(i||!(o.e.f&le))&&L.push(o),o=o.next;var B=L.length;if(B>0){var Z=a&Xt&&f===0?t:null;if(l){for(w=0;w<B;w+=1)(ir=L[w].a)==null||ir.measure();for(w=0;w<B;w+=1)(re=L[w].a)==null||re.fix()}Sa(r,L,Z,u)}}l&&vt(()=>{var T;if(y!==void 0)for(_ of y)(T=_.a)==null||T.apply()}),$.first=r.first&&r.first.e,$.last=v&&v.e}function ka(e,r,t,n){n&at&&Rr(e.v,r),n&it?Rr(e.i,t):e.i=t}function Pa(e,r,t,n,a,i,s,l,c){var f=cr,u=(c&at)!==0,d=(c&Un)===0,o=u?d?tt(a):pr(a):a,p=c&it?pr(s):s,v={i:p,v:o,k:i,a:null,e:null,prev:t,next:n};cr=v;try{return v.e=Ke(()=>l(e,o,p),Xn),v.e.prev=t&&t.e,v.e.next=n&&n.e,t===null?r.first=v:(t.next=v,t.e.next=v.e),n!==null&&(n.prev=v,n.e.prev=v.e),v}finally{cr=f}}function Mt(e,r,t){for(var n=e.next?e.next.e.nodes_start:t,a=r?r.e.nodes_start:t,i=e.e.nodes_start;i!==n;){var s=$r(i);a.before(i),i=s}}function me(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function Oa(e,r,t){Sr(()=>{var n=tr(()=>r(e,t==null?void 0:t())||{});if(n!=null&&n.destroy)return()=>n.destroy()})}function Ta(e,r){var t=e.__attributes??(e.__attributes={});t.value===(t.value=r)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r)}function wn(e,r,t,n){var a=e.__attributes??(e.__attributes={});a[r]!==(a[r]=t)&&("__styles"in e&&(e.__styles={}),t==null?e.removeAttribute(r):typeof t!="string"&&Ia(e).includes(r)?e[r]=t:e.setAttribute(r,t))}var Bt=new Map;function Ia(e){var r=Bt.get(e.nodeName);if(r)return r;Bt.set(e.nodeName,r=[]);for(var t,n=Mr(e),a=Element.prototype;a!==n;){t=jt(n);for(var i in t)t[i].set&&r.push(i);n=Mr(n)}return r}function ne(e,r,t){if(t){if(e.classList.contains(r))return;e.classList.add(r)}else{if(!e.classList.contains(r))return;e.classList.remove(r)}}function ye(e,r,t,n){var a=e.__styles??(e.__styles={});a[r]!==t&&(a[r]=t,t==null?e.style.removeProperty(r):e.style.setProperty(r,t,""))}const xa=()=>performance.now(),we={tick:e=>requestAnimationFrame(e),now:()=>xa(),tasks:new Set};function bn(e){we.tasks.forEach(r=>{r.c(e)||(we.tasks.delete(r),r.f())}),we.tasks.size!==0&&we.tick(bn)}function Ma(e){let r;return we.tasks.size===0&&we.tick(bn),{promise:new Promise(t=>{we.tasks.add(r={c:e,f:t})}),abort(){we.tasks.delete(r)}}}function ur(e,r){e.dispatchEvent(new CustomEvent(r))}function Ba(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const r=e.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Rt(e){const r={},t=e.split(";");for(const n of t){const[a,i]=n.split(":");if(!a||i===void 0)break;const s=Ba(a.trim());r[s]=i.trim()}return r}const Ra=e=>e;function En(e,r,t){var n=cr,a,i,s,l=null;n.a??(n.a={element:e,measure(){a=this.element.getBoundingClientRect()},apply(){if(s==null||s.abort(),i=this.element.getBoundingClientRect(),a.left!==i.left||a.right!==i.right||a.top!==i.top||a.bottom!==i.bottom){const c=r()(this.element,{from:a,to:i},t==null?void 0:t());s=yr(this.element,c,void 0,1,()=>{s==null||s.abort(),s=void 0})}},fix(){if(!e.getAnimations().length){var{position:c,width:f,height:u}=getComputedStyle(e);if(c!=="absolute"&&c!=="fixed"){var d=e.style;l={position:d.position,width:d.width,height:d.height,transform:d.transform},d.position="absolute",d.width=f,d.height=u;var o=e.getBoundingClientRect();if(a.left!==o.left||a.top!==o.top){var p=`translate(${a.left-o.left}px, ${a.top-o.top}px)`;d.transform=d.transform?`${d.transform} ${p}`:p}}}},unfix(){if(l){var c=e.style;c.position=l.position,c.width=l.width,c.height=l.height,c.transform=l.transform}}}),n.a.element=e}function E(e,r,t,n){var a=(e&Kn)!==0,i=(e&Yn)!==0,s=a&&i,l=(e&Jn)!==0,c=s?"both":a?"in":"out",f,u=r.inert,d,o;function p(){var h=C,A=$;ce(null),fe(null);try{return f??(f=t()(r,(n==null?void 0:n())??{},{direction:c}))}finally{ce(h),fe(A)}}var v={is_global:l,in(){var h;if(r.inert=u,!a){o==null||o.abort(),(h=o==null?void 0:o.reset)==null||h.call(o);return}i||d==null||d.abort(),ur(r,"introstart"),d=yr(r,p(),o,1,()=>{ur(r,"introend"),d==null||d.abort(),d=f=void 0})},out(h){if(!i){h==null||h(),f=void 0;return}r.inert=!0,ur(r,"outrostart"),o=yr(r,p(),d,0,()=>{ur(r,"outroend"),h==null||h()})},stop:()=>{d==null||d.abort(),o==null||o.abort()}},y=$;if((y.transitions??(y.transitions=[])).push(v),a&&Wr){var g=l;if(!g){for(var m=y.parent;m&&m.f&Er;)for(;(m=m.parent)&&!(m.f&wr););g=!m||(m.f&Ut)!==0}g&&Sr(()=>{tr(()=>v.in())})}}function yr(e,r,t,n,a){var i=n===1;if(Rn(r)){var s,l=!1;return vt(()=>{if(!l){var g=r({direction:i?"in":"out"});s=yr(e,g,t,n,a)}}),{abort:()=>{l=!0,s==null||s.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(t==null||t.deactivate(),!(r!=null&&r.duration))return a(),{abort:ae,deactivate:ae,reset:ae,t:()=>n};const{delay:c=0,css:f,tick:u,easing:d=Ra}=r;var o=[];if(i&&t===void 0&&(u&&u(0,1),f)){var p=Rt(f(0,1));o.push(p,p)}var v=()=>1-n,y=e.animate(o,{duration:c});return y.onfinish=()=>{var g=(t==null?void 0:t.t())??1-n;t==null||t.abort();var m=n-g,h=r.duration*Math.abs(m),A=[];if(h>0){if(f)for(var _=Math.ceil(h/16.666666666666668),w=0;w<=_;w+=1){var G=g+m*d(w/_),M=f(G,1-G);A.push(Rt(M))}v=()=>{var k=y.currentTime;return g+m*d(k/h)},u&&Ma(()=>{if(y.playState!=="running")return!1;var k=v();return u(k,1-k),!0})}y=e.animate(A,{duration:h,fill:"forwards"}),y.onfinish=()=>{v=()=>n,u==null||u(n,1-n),a()}},{abort:()=>{y&&(y.cancel(),y.effect=null,y.onfinish=ae)},deactivate:()=>{a=ae},reset:()=>{n===0&&(u==null||u(1,0))},t:()=>v()}}function An(e){var r=!1;return function(...t){if(!r)return r=!0,e==null?void 0:e.apply(this,t)}}function Ie(e=!1){const r=x,t=r.l.u;if(!t)return;let n=()=>ha(r.s);if(e){let a=0,i={};const s=nn(()=>{let l=!1;const c=r.s;for(const f in c)c[f]!==i[f]&&(i[f]=c[f],l=!0);return l&&a++,a});n=()=>b(s)}t.b.length&&na(()=>{Gt(r,n),Br(t.b)}),Pt(()=>{const a=tr(()=>t.m.map(Gn));return()=>{for(const i of a)typeof i=="function"&&i()}}),t.a.length&&Pt(()=>{Gt(r,n),Br(t.a)})}function Gt(e,r){if(e.l.s)for(const t of e.l.s)b(t);r()}function $n(e,r,t){if(e==null)return r(void 0),ae;const n=tr(()=>e.subscribe(r,t));return n.unsubscribe?()=>n.unsubscribe():n}function q(e,r,t){const n=t[r]??(t[r]={store:null,source:tt(void 0),unsubscribe:ae});if(n.store!==e)if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=ae;else{var a=!0;n.unsubscribe=$n(e,i=>{a?n.source.v=i:er(n.source,i)}),a=!1}return b(n.source)}function nr(){const e={};return un(()=>{for(var r in e)e[r].unsubscribe()}),e}const Ga="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ga);Hn();let Je,Tr;const fr="/grinchs-bar/",Sn={gunShot:"sound/gun_shot.mp3",playerDead:"sound/player_game_over.mp3",revolverClear:"sound/revolver_clear.mp3",revolverSpin:"sound/revolver_spin.mp3",liar:"sound/liar.mp3",gong:"sound/gong.mp3",cardsFlip:"sound/cards_flip.mp3",whoosh:"sound/whoosh.mp3",deepWhoosh:"sound/deep_whoosh.mp3",cardSpinWhoosh:"sound/card_spin_whoosh.mp3",singleCardFlip:"sound/single_card_flip.mp3"};function Ee(e){const r=new Audio(fr+Sn[e]);Je.createMediaElementSource(r).connect(Je.destination),r.play().then(()=>r.remove())}const Ue={gameStart:new Audio(fr+"music/game_start.mp3"),gameEnd:new Audio(fr+"music/game_end.mp3"),intro:new Audio(fr+"music/intro.mp3")};function jr(e,r){return Ue[e].currentTime=0,Ue[e].volume=1,Ue[e].play()}async function Na(e,r){const t=Ue[e];return new Promise(n=>{const i=t.volume/(r/50);let s=0;const l=setInterval(()=>{s+=50,t.volume>0&&s<r?t.volume=Math.max(0,t.volume-i):(clearInterval(l),t.pause(),n())},50)})}function Da(e,r){Se(r,!1),Ie(),H("click",Gr,An(()=>{Je=new(window.AudioContext||window.webkitAudioContext),Tr=new(window.AudioContext||window.webkitAudioContext),Object.values(Ue).forEach(t=>{Tr.createMediaElementSource(t).connect(Tr.destination)})})),Ce()}var se=(e=>(e[e.Preperation=0]="Preperation",e[e.InProcess=1]="InProcess",e[e.GameEnded=2]="GameEnded",e))(se||{}),D=(e=>(e.Ace="Ace",e.King="King",e.Queen="Queen",e.Jack="Jack",e.Joker="Joker",e.Devil="Devil",e))(D||{});const Ne=[];function W(e,r=ae){let t=null;const n=new Set;function a(l){if(Jt(e,l)&&(e=l,t)){const c=!Ne.length;for(const f of n)f[1](),Ne.push(f,e);if(c){for(let f=0;f<Ne.length;f+=2)Ne[f][0](Ne[f+1]);Ne.length=0}}}function i(l){a(l(e))}function s(l,c=ae){const f=[l,c];return n.add(f),n.size===1&&(t=r(a,i)||ae),l(e),()=>{n.delete(f),n.size===0&&t&&(t(),t=null)}}return{set:a,update:i,subscribe:s}}function gt(e){let r;return $n(e,t=>r=t)(),r}function R(e){return new Promise(r=>setTimeout(r,e*1e3))}function Pe(e=1,r=0){if(r>e)throw new Error("Min should be less than or equal to Max.");const t=crypto.getRandomValues(new Uint32Array(1))[0];return r+t%(e-r+1)}const qa=e=>e;function ee(e,{delay:r=0,duration:t=400,easing:n=qa}={}){const a=+getComputedStyle(e).opacity;return{delay:r,duration:t,easing:n,css:i=>`opacity: ${i*a}`}}function j(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function mt(e){const r=e-1;return r*r*r+1}function La(e){return Math.sin(-13*(e+1)*Math.PI/2)*Math.pow(2,-10*e)+1}function Fa(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}function Va(e){return--e*e*e*e*e+1}function Wa(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)}function Ha(e){return 2.70158*e*e*e-1.70158*e*e}function ve(e,r){return{delay:r==null?void 0:r.delay,duration:(r==null?void 0:r.duration)??300,easing:(r==null?void 0:r.easing)??j,css:t=>`opacity: ${t}; transform: scale(${t});`}}function Nt(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}async function Dt(e,r,t){if(gt(dr)||r.length<1)return;dr.set(!0),Ee(e==="liar"?"liar":"gong"),e==="liar"?(Ur.set(!0),await R(3)):(Ee("cardSpinWhoosh"),Kr.set(!0),await R(4),Kr.set(!1),await R(1)),Yr.set(!0),await Ee("revolverSpin"),t===!0?await R(2.4):await R(5);const n=r.map(([a,i])=>{const s=new Audio(Sn[a?"gunShot":"revolverClear"]);return Je.createMediaElementSource(s).connect(Je.destination),[a,i,()=>s.play().then(()=>s.remove())]});for(const[a,i,s]of n)i(),a&&(zr.set(!0),zr.set(!1)),s(),await R(.5);Yr.set(!1),dr.set(!1)}function ja(e){e.style.visibility="hidden",zr.subscribe(r=>{r&&(e.style.visibility="unset",setTimeout(()=>{e.style.visibility="hidden"},50))})}const zr=W(!1),dr=W(!1),Ur=W(!1),Kr=W(!1),Yr=W(!1);var za=I('<div id="LiarHand" class="action-container svelte-154svea"><div class="liar-hand-wrapper svelte-154svea"><img src="liar_hand.png" alt="Liar!" class="svelte-154svea"></div></div>'),Ua=I(`<div id="DevilCardTriggered" class="action-container svelte-154svea"><div class="devil-card-wrapper svelte-154svea"><div class="playing-card svelte-154svea"><div class="front svelte-154svea" style="background-image: url('playing_card/Devil.png')"></div> <div class="back svelte-154svea" style="background-image: url('playing_card/back.png')"></div></div></div></div>`),Ka=I('<div id="RevolverChamber" class="action-container svelte-154svea"><div class="img-wrapper svelte-154svea"><img src="revolver_chamber.png" alt="banner" class="svelte-154svea"></div> <div class="flash svelte-154svea"></div></div>'),Ya=I('<div id="RevolverActions" class="svelte-154svea"><!> <!> <!></div>');function Ja(e,r){Se(r,!1);const t=nr(),n=()=>q(dr,"$revolverActionVisible",t),a=()=>q(Ur,"$liarHandVisible",t),i=()=>q(Kr,"$devilCardVisible",t),s=()=>q(Yr,"$revolverChamberVisible",t);function l(d){return{duration:400,easing:Nt,css:o=>`opacity: ${o}; transform: scale(${o});`}}function c(d){return{duration:2e3,css:o=>{const p=Nt(o);return`opacity: ${o}; transform: translateY(${20-20*p}rem) scale(${p});`}}}Ie();var f=ht(),u=$e(f);X(u,n,d=>{var o=Ya(),p=S(o);X(p,a,g=>{var m=za(),h=S(m);E(5,h,()=>l),E(6,h,()=>ee,()=>({duration:500})),H("introend",h,()=>setTimeout(()=>Ur.set(!1),1500)),O(g,m)});var v=P(p,2);X(v,i,g=>{var m=Ua(),h=S(m);E(5,h,()=>c),E(6,h,()=>ee,()=>({easing:j,duration:500})),O(g,m)});var y=P(v,2);X(y,s,g=>{var m=Ka(),h=S(m),A=P(h,2);Oa(A,_=>ja(_)),E(5,h,()=>ve,()=>({duration:500})),O(g,m)}),E(5,o,()=>ee,()=>({duration:500})),E(6,o,()=>ee,()=>({easing:j,duration:200})),O(d,o)}),O(e,f),Ce()}var Za=I('<div class="playing-card svelte-1torxv3"><div class="front svelte-1torxv3"></div></div>'),Qa=I('<div class="start-screen-background svelte-1torxv3"></div>');function Xa(e,r){Se(r,!1);const t=Array.from({length:40},(i,s)=>{let l=null;if(Math.random()>.2){const d=Pe(Object.keys(D).length);l=Object.values(D)[d]}const c=Math.random()*96+2,f=Math.random()*96+2,u=Pe(90);return{card:l,x:c,y:f,rotate:u}});function n(i,{rotate:s,cardIndex:l}){const c=Pe(4,2),f=c*3;return{easing:mt,delay:15*l,duration:400+c*Pe(200),css:u=>`transform: rotate(${s*u}deg) scale(${c-(c-1)*u});filter: blur(${f-f*u}px);opacity: ${u};`}}Ie();var a=Qa();Le(a,5,()=>t,mr,(i,s,l)=>{let c=()=>b(s).card,f=()=>b(s).x,u=()=>b(s).y,d=()=>b(s).rotate;var o=Za(),p=S(o);oe(()=>{ye(o,"left",`${f()??""}%`),ye(o,"top",`${u()??""}%`),ye(o,"transform",`rotate(${d()??""}deg)`),ye(p,"background-image",`url('playing_card/${(c()||"back")??""}.png')`)}),E(5,o,()=>n,()=>({rotate:d(),cardIndex:l})),O(i,o)}),E(6,a,()=>ee,()=>({easing:j,duration:1e3})),O(e,a),Ce()}function Cn(e,{from:r,to:t},n={}){var a=getComputedStyle(e),i=ei(e),s=a.transform==="none"?"":a.transform,[l,c]=a.transformOrigin.split(" ").map(parseFloat),f=r.width/t.width,u=r.height/t.height,d=(r.left+f*l-(t.left+l))/i,o=(r.top+u*c-(t.top+c))/i,{delay:p=0,duration:v=g=>Math.sqrt(g)*120,easing:y=mt}=n;return{delay:p,duration:typeof v=="function"?v(Math.sqrt(d*d+o*o)):v,easing:y,css:(g,m)=>{var h=m*d,A=m*o,_=g+m*f,w=g+m*u;return`transform: ${s} scale(${_}, ${w}) translate(${h}px, ${A}px);`}}}function ei(e){if("currentCSSZoom"in e)return e.currentCSSZoom;for(var r=e,t=1;r!==null;)t*=+getComputedStyle(r).zoom,r=r.parentElement;return t}function qt(){jr("intro"),yt.set(!0)}async function Lt(){yt.set(!1),await Na("intro",2e3)}const yt=W(!1);var ri=I('<div class="entry svelte-13u5msn"><input type="text" class="svelte-13u5msn"> <button class="remove-player button-3d red small no-underline svelte-13u5msn">❌</button></div>'),ti=I(`<!> <div class="modal-container svelte-13u5msn"><div class="players-overview svelte-13u5msn"><div class="header svelte-13u5msn"><div id="GameLogo" class="svelte-13u5msn"><h1 class="svelte-13u5msn">Grinch's Bar</h1> <img src="banner.png" alt="banner" class="svelte-13u5msn"></div></div> <div class="players-list svelte-13u5msn"><!> <div class="add-player entry svelte-13u5msn"><button class=" button-3d svelte-13u5msn">+ Add Player</button></div></div> <div class="actions svelte-13u5msn"><button class="start-game button-3d solid-green svelte-13u5msn">Start Game</button></div></div></div>`,1);function ni(e,r){Se(r,!1);const t=nr(),n=()=>q(z,"$GrinchsBar",t),a=()=>q(yt,"$preparationMenuVisible",t),i=nt();function s(o){return{delay:500,duration:2e3,easing:mt,css:p=>`opacity: ${p}; transform: scale(${2-1*p}); filter: blur(${10-10*p}px);`}}function l(o){return{duration:1500,easing:j,css:p=>`opacity: ${p}; transform: scale(${.85+.15*p});`}}function c(o){const p=o.clientHeight;return{duration:200,easing:j,css:v=>`opacity: ${v}; overflow: hidden; height: ${p*v}px; margin-top: ${1*v}rem;`}}function f(o){return{duration:1500,easing:j,css:p=>`opacity: ${p}; transform: translateY(-${8-8*p}rem) scale(${2-1*p});`}}lt(()=>n(),()=>{er(i,n().players.length<2||n().players.some(o=>!o.name))}),ut(),Ie();var u=ht(),d=$e(u);X(d,a,o=>{var p=ti(),v=$e(p);Xa(v,{});var y=P(v,2),g=S(y),m=S(g),h=P(m,2),A=S(h);Le(A,11,()=>n().players,k=>k.name,(k,Y,J)=>{var L=ri(),B=S(L),Z=P(B,2);oe(()=>Ta(B,b(Y).name)),H("change",B,_e=>z.updatePlayerName(b(J),_e.currentTarget.value)),H("click",Z,()=>z.removePlayer(b(J))),En(L,()=>Cn,()=>({easing:j})),E(3,L,()=>c),O(k,L)});var _=P(A,2),w=S(_),G=P(h,2),M=S(G);oe(()=>M.disabled=b(i)),E(5,m,()=>f),H("click",w,()=>z.addPlayer()),H("click",M,()=>z.startGame()),E(5,g,()=>s),E(2,g,()=>l),O(o,p)}),O(e,u),Ce()}const je=W([]);async function Ft(){je.set(Object.keys(z.$().cardsInGame).map(()=>[!0,!1])),Jr.set(!0),await R(1),Ee("whoosh"),await R(2),Ee("cardsFlip");const e=gt(je).length;for(let r=0;r<e;(r+=1)-1)je.update(t=>(t[r][0]=!1,t)),await R(.1);await R(1);for(let r=0;r<e;(r+=1)-1)je.update(t=>(t[r][1]=!0,t)),await R(.1);await new Promise(r=>{Zr.set(()=>r())}),Zr.set(null),Ee("deepWhoosh"),Jr.set(!1),await R(.1)}const Jr=W(!1),Zr=W(null);var ai=I('<span class="playing-card-count svelte-2dy7mq"> </span>'),ii=I(`<div class="card-slot svelte-2dy7mq"><div class="playing-card svelte-2dy7mq"><div class="front svelte-2dy7mq"></div> <div class="back svelte-2dy7mq" style="background-image: url('playing_card/back.png')"></div> <!></div></div>`),si=I('<div id="PlayingCardsInGame" class="svelte-2dy7mq"><div class="cards-container svelte-2dy7mq"></div> <button class="players-ready button-3d svelte-2dy7mq">Continue</button></div>');function oi(e,r){Se(r,!1);const t=nr(),n=()=>q(z,"$GrinchsBar",t),a=()=>q(Zr,"$playersAreReadyPromiseResolver",t),i=()=>q(Jr,"$showPlayingCardsInGame",t),s=()=>q(je,"$cardsState",t),l=nt();function c(v){const g=v.offsetParent.offsetWidth/2-v.offsetWidth/2,m=v.parentElement;m.style.width=v.offsetWidth+"px",m.style.height=v.offsetHeight+"px";const h=2500,A=1e3,_=h-A,w=A/h;return{duration:h,css:G=>{if(G<w)return`position: absolute; left: ${g}px;`;const M=Fa((h*G-A)/_);return`position: absolute;left: ${g+(v.offsetLeft-g)*M}px;`}}}function f(v,{cardIndex:y}){return{easing:Ha,delay:30*y,duration:500,css:g=>`opacity: ${g}; transform: scale(${.75+.25*g})`}}function u(v){return{duration:2e3,easing:Va,css:y=>`transform: scale(${1.5-.5*y});`}}function d(){a()!==null&&a()()}lt(()=>n(),()=>{er(l,Object.keys(n().cardsInGame).length)}),ut(),Ie();var o=ht(),p=$e(o);X(p,i,v=>{var y=si(),g=S(y);Le(g,5,()=>Object.entries(n().cardsInGame),mr,(h,A,_)=>{let w=()=>b(A)[0],G=()=>b(A)[1];var M=ii(),k=S(M),Y=S(k),J=P(Y,4);X(J,()=>s()[_][1],L=>{var B=ai(),Z=S(B);oe(()=>Hr(Z,G())),E(5,B,()=>ve,()=>({duration:1e3,easing:Wa})),O(L,B)}),oe(()=>{ne(k,"flipped",s()[_][0]),ye(k,"z-index",b(l)-_),wn(Y,"style",`background-image: url('playing_card/${w()??""}.png')`)}),E(5,k,()=>c),E(6,k,()=>f,()=>({cardIndex:_})),O(h,M)});var m=P(g,2);E(5,g,()=>u),H("click",m,d),E(1,m,()=>ve,()=>({delay:6e3,duration:1e3})),E(2,m,()=>ve,()=>({duration:500})),E(1,y,()=>ee,()=>({duration:1e3})),E(2,y,()=>ee,()=>({easing:j,delay:550,duration:200})),O(v,y)}),O(e,o),Ce()}var N,Ze,Qr;class li{constructor(){Pr(this,Ze);Pr(this,N,W({userConsentForSound:!1,gameState:se.Preperation,players:[{name:"Me, myself & I",loadedBulletInSlot:0,triggers:-1}],winner:-1,cardsInGame:{[D.King]:8,[D.Queen]:8,[D.Jack]:8,[D.Ace]:8,[D.Joker]:2,[D.Devil]:2},cardOfTheRound:D.King}));At(this,"subscribe",F(this,N).subscribe)}$(){return gt(this)}consentOfUserGiven(){if(this.$().userConsentForSound)return;F(this,N).update(t=>(t.userConsentForSound=!0,t)),qt();const r={presentPlayingCardsInGame:()=>{Ft()},quickGameStart:async()=>{const t=this.$();t.gameState===se.Preperation&&(t.players.length<2||t.players.some(n=>!n.name)||(F(this,N).update(n=>(n.winner=-1,n.gameState=se.InProcess,n.players.forEach((a,i)=>{n.players[i].triggers=-1,n.players[i].loadedBulletInSlot=0}),n)),await Lt(),Vt(),Ir(this.$().cardOfTheRound)))},updateCardOfRound:()=>{Or(this,Ze,Qr).call(this)},exitGame:()=>{this.exitGame()},updateRevolverChamber:()=>{F(this,N).update(t=>(t.players.forEach((n,a)=>{t.players[a].triggers=-1,t.players[a].loadedBulletInSlot=Pe(5)}),t))},randomWinner:()=>{F(this,N).update(t=>(t.winner=t.players.length-1,t))},resetWinner:()=>{F(this,N).update(t=>(t.winner=-1,t))}};window.GrinchsBarDebug=r}addPlayer(){F(this,N).update(r=>(r.players.length<8&&r.players.push({name:"",triggers:-1,loadedBulletInSlot:0}),r))}updatePlayerName(r,t){F(this,N).update(n=>(n.players[r].name=t,n))}removePlayer(r){F(this,N).update(t=>(t.players.length===1?t.players[0].name="":t.players.splice(r,1),t))}getCardsAmountByPlayersAmount(r){const a=Math.floor(r*5/4),i=Math.ceil(r/2),s=Math.ceil(r/4);return{[D.King]:a,[D.Queen]:a,[D.Jack]:a,[D.Ace]:a,[D.Joker]:i,[D.Devil]:s}}async startGame(){const r=this.$();r.gameState!==se.InProcess&&(r.players.length<2||r.players.some(t=>!t.name)||(r.gameState===se.GameEnded&&Wt(),F(this,N).update(t=>(t.winner=-1,t.gameState=se.InProcess,t.cardsInGame=this.getCardsAmountByPlayersAmount(t.players.length),t.players.forEach((n,a)=>{t.players[a].triggers=-1,t.players[a].loadedBulletInSlot=Pe(5)}),t)),await Lt(),jr("gameStart"),await Ft(),Vt(),Ir(this.$().cardOfTheRound)))}async exitGame(){this.$().gameState!==se.Preperation&&(F(this,N).update(t=>(t.gameState=se.Preperation,t)),Wt(),await R(2),qt())}async lastPlayerWon(){const t=this.$().players.map((n,a)=>({...n,index:a})).filter(({triggers:n,loadedBulletInSlot:a})=>n<a);t.length>1||(await R(.5),jr("gameEnd"),F(this,N).update(n=>(n.gameState=se.GameEnded,n.winner=t[0].index,n)))}async playerDied(r){const n=this.$().players.filter(a=>a.triggers<a.loadedBulletInSlot);await R(1),n.length<2?this.lastPlayerWon():(r&&(Ee("playerDead"),await R(2)),Or(this,Ze,Qr).call(this))}async playerLied(r){const n=this.$().players[r];if(n.triggers>=n.loadedBulletInSlot)return;const a=n.triggers+1===n.loadedBulletInSlot;await Dt("liar",[[a,()=>{F(this,N).update(i=>(i.players[r].triggers+=1,i))}]],a&&n.loadedBulletInSlot===5),await this.playerDied(a)}async devilCard(r){const t=this.$(),a=t.players.map((s,l)=>({...s,index:l})).filter(s=>s.index!==r&&s.triggers<s.loadedBulletInSlot);if(a.length<1)return;let i=!1;await Dt("devil",a.map(({index:s})=>{const l=t.players[s],c=l.triggers+1===l.loadedBulletInSlot;return c&&(i=!0),[c,()=>{F(this,N).update(f=>(f.players[s].triggers+=1,f))}]})),await this.playerDied(i)}}N=new WeakMap,Ze=new WeakSet,Qr=function(){F(this,N).update(r=>{const t=Object.keys(D),n=Pe(t.length-3);return r.cardOfTheRound=t[n],Ir(r.cardOfTheRound),r})};const z=new li,wt=W(!1),Vt=()=>{wt.set(!0)},Wt=()=>{wt.set(!1)};async function Ir(e){Xr.set(!0),await R(2),et.set(!0),kn.set(e),await R(.65),Ee("singleCardFlip"),Xr.set(!1),await R(2),et.set(!1)}const Xr=W(!0),et=W(!1),kn=W(D.King),xr=W(null);var ui=I('<img src="boom.png" alt="BOOM" class="svelte-12ec9v4">'),ci=I('<div class="player-revolver-slot svelte-12ec9v4"><!></div>'),fi=I('<button class="player svelte-12ec9v4"><div class="border svelte-12ec9v4"></div> <span class="player-name svelte-12ec9v4"> </span> <div class="player-revolver-chamber svelte-12ec9v4"></div></button>'),di=I('<div class="game-menu-actions svelte-12ec9v4"><button class="button-3d red svelte-12ec9v4"><span class="svelte-12ec9v4">Exit</span></button></div>'),vi=I('<img src="boom.png" alt="BOOM" class="svelte-12ec9v4">'),pi=I('<div class="player-revolver-slot svelte-12ec9v4"><!></div>'),_i=I('<div class="game-winner-container modal-container svelte-12ec9v4"><div class="game-winner modal svelte-12ec9v4"><div class="player-wrapper svelte-12ec9v4"><div class="player svelte-12ec9v4"><div class="border svelte-12ec9v4"></div> <span class="player-name svelte-12ec9v4"> </span> <div class="player-revolver-chamber svelte-12ec9v4"></div> <img class="crown svelte-12ec9v4" src="crown.png" alt="crown"></div></div> <div class="actions svelte-12ec9v4"><button class="button-3d red svelte-12ec9v4">Exit</button> <button class="button-3d solid-green svelte-12ec9v4">Next Game</button></div></div></div>'),hi=I(`<div id="GameBoard" class="svelte-12ec9v4"><div id="CardOfTheRound" class="svelte-12ec9v4"><div class="playing-card-wrapper svelte-12ec9v4"><div class="playing-card svelte-12ec9v4"><div class="front svelte-12ec9v4"></div> <div class="back svelte-12ec9v4" style="background-image: url('playing_card/back.png')"></div></div></div></div> <div class="game-actions svelte-12ec9v4"><button class="trigger button-3d no-underline svelte-12ec9v4">Liar❗</button> <button class="devil-card button-3d no-underline svelte-12ec9v4">Devil card used 👹</button></div> <div class="players svelte-12ec9v4"></div> <!></div> <!>`,1),gi=I("<!> <!>",1);function mi(e,r){Se(r,!1);const t=nr(),n=()=>q(z,"$GrinchsBar",t),a=()=>q(xr,"$selectPlayerAction",t),i=()=>q(y,"$playerCardElPos",t),s=()=>q(wt,"$gameBoardVisible",t),l=()=>q(et,"$cardOfTheRoundNewCardAnim",t),c=()=>q(Xr,"$cardOfTheRoundFlipped",t),f=()=>q(kn,"$cardOfTheRound",t),u=nt();function d(_){xr.set(a()!==null?null:_)}function o(_){switch(a()){case"liar":{z.playerLied(_);break}case"devil":{z.devilCard(_);break}}xr.set(null)}function p(_){return{duration:1e3,easing:j,css:w=>`opacity: ${w}; transform: scale(${.75+.25*w});`}}function v(_){return{duration:1500,easing:j,css:w=>`opacity: ${w}; transform: translateY(${6-6*w}rem) scale(${.85+.15*w});`}}const y=W({});function g(_,{isWinner:w,playerIndex:G}){if(!w)return{};const[M,k]=i()[G],Y=window.innerHeight/2-_.offsetHeight/2-65,J=window.innerWidth/2-_.offsetWidth/2,L=k-Y,B=M-J;return{duration:1500,easing:j,css:Z=>`z-index: 999; position: absolute; left: 0px; top: 0px;transform: translate(${J+B*Z}px, ${Y+L*Z}px);`}}lt(()=>n(),()=>{er(u,n().winner!==-1?n().players[n().winner]:null)}),ut(),Ie();var m=gi(),h=$e(m);oi(h,{});var A=P(h,2);X(A,s,_=>{var w=hi(),G=$e(w),M=S(G),k=S(M),Y=S(k),J=S(Y),L=P(M,2),B=S(L),Z=P(B,2),_e=P(L,2);Le(_e,15,()=>n().players.filter((re,T)=>T!==n().winner),re=>re.name,(re,T,te)=>{var K=fi();const ke=kt(()=>b(T).triggers===b(T).loadedBulletInSlot),sr=kt(()=>b(te)===n().winner);var or=P(S(K),2),lr=S(or),kr=P(or,2);Le(kr,4,()=>Array.from({length:6}),mr,(xe,Me,he)=>{var Be=ci(),bt=S(Be);X(bt,()=>he===b(T).loadedBulletInSlot&&he<=b(T).triggers,ge=>{var Re=ui();O(ge,Re)}),oe(()=>{ne(Be,"clear",he!==b(T).loadedBulletInSlot&&he<=b(T).triggers),ne(Be,"peng",he===b(T).loadedBulletInSlot&&he<=b(T).triggers)}),O(xe,Be)}),oe(()=>{K.disabled=b(ke),ne(K,"dead",b(ke)),ye(K,"background-image",`url('player${(b(ke)?"_dead":"")??""}.png')`),ye(K,"animation-delay",`${b(te)*30}ms`),Hr(lr,b(T).name)}),En(K,()=>Cn,()=>({duration:1500,easing:j})),E(5,K,()=>ve,()=>({duration:1e3,delay:25*b(te)})),H("introend",K,xe=>{y.update(Me=>(Me[b(te)]=[xe.currentTarget.offsetLeft,xe.currentTarget.offsetTop],Me))}),E(2,K,()=>g,()=>({isWinner:b(sr),playerIndex:b(te)})),H("click",K,()=>o(b(te))),O(re,K)});var ar=P(_e,2);X(ar,()=>n().winner===-1,re=>{var T=di(),te=S(T);H("click",te,()=>z.exitGame()),E(2,T,()=>ve,()=>({duration:1e3})),O(re,T)});var ir=P(G,2);X(ir,()=>b(u)!==null,re=>{var T=_i(),te=S(T),K=S(te),ke=S(K);ye(ke,"background-image","url('player.png')");var sr=P(S(ke),2),or=S(sr),lr=P(sr,2);Le(lr,4,()=>Array.from({length:6}),mr,(Be,bt,ge)=>{var Re=pi(),Pn=S(Re);X(Pn,()=>ge===b(u).loadedBulletInSlot&&ge<=b(u).triggers,On=>{var Tn=vi();O(On,Tn)}),oe(()=>{ne(Re,"clear",ge!==b(u).loadedBulletInSlot&&ge<=b(u).triggers),ne(Re,"peng",ge===b(u).loadedBulletInSlot&&ge<=b(u).triggers)}),O(Be,Re)});var kr=P(lr,2),xe=P(K,2),Me=S(xe),he=P(Me,2);oe(()=>Hr(or,b(u).name)),E(5,kr,()=>ve,()=>({delay:2e3,duration:1e3,easing:La})),E(5,ke,()=>ee,()=>({delay:1500,duration:1})),H("click",Me,()=>z.exitGame()),H("click",he,()=>z.startGame()),E(5,te,()=>v),E(5,T,()=>ee,()=>({easing:j,duration:1e3})),E(6,T,()=>ee,()=>({easing:j,duration:500})),O(re,T)}),oe(()=>{ne(k,"new-card-anim",l()),ne(Y,"flipped",c()),wn(J,"style",`background-image: url('playing_card/${f()??""}.png')`),B.disabled=a()==="devil",ne(B,"active",a()==="liar"),Z.disabled=a()==="liar",ne(Z,"active",a()==="devil"),ne(_e,"selecting",a()!==null)}),E(5,M,()=>p),E(5,B,()=>ve,()=>({duration:1e3})),H("click",B,()=>d("liar")),E(5,Z,()=>ve,()=>({duration:1e3})),H("click",Z,()=>d("devil")),E(1,G,()=>ee,()=>({duration:1e3})),E(2,G,()=>ee,()=>({duration:500})),O(_,w)}),O(e,m),Ce()}var yi=I('<div class="modal-container user-consent svelte-rvnfg2"><div class="modal svelte-rvnfg2"><h1 class="svelte-rvnfg2"><span>Click</span> <span style="opacity: 0.5">anywhere</span> <span>to start</span> <span style="opacity: 0.5">the game</span></h1></div></div>'),wi=I("<!> <!> <!>",1),bi=I("<!> <!>",1);function Ei(e,r){Se(r,!1);const t=nr(),n=()=>q(z,"$GrinchsBar",t);Ie();var a=bi();H("click",en.body,An(()=>z.consentOfUserGiven()));var i=$e(a);Da(i,{});var s=P(i,2);X(s,()=>!n().userConsentForSound,l=>{var c=yi();O(l,c)},l=>{var c=wi(),f=$e(c);Ja(f,{});var u=P(f,2);ni(u,{});var d=P(u,2);mi(d,{}),O(l,c)}),O(e,a),Ce()}Aa(Ei,{target:document.body});

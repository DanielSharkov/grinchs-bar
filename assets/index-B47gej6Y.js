var Tn=Object.defineProperty;var Et=e=>{throw TypeError(e)};var In=(e,r,t)=>r in e?Tn(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var At=(e,r,t)=>In(e,typeof r!="symbol"?r+"":r,t),$t=(e,r,t)=>r.has(e)||Et("Cannot "+t);var L=(e,r,t)=>($t(e,r,"read from private field"),t?t.call(e):r.get(e)),xr=(e,r,t)=>r.has(e)?Et("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t);var Pr=(e,r,t)=>($t(e,r,"access private method"),t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();const zn=!1;var Wt=Array.isArray,rt=Array.from,Mn=Object.defineProperty,St=Object.getOwnPropertyDescriptor,Ht=Object.getOwnPropertyDescriptors,zr=Object.getPrototypeOf;function Bn(e){return typeof e=="function"}const ae=()=>{};function Rn(e){return e()}function Mr(e){for(var r=0;r<e.length;r++)e[r]()}const pe=2,jt=4,Qe=8,wr=16,de=32,br=64,Pe=128,vr=256,U=512,Ae=1024,Le=2048,le=4096,Xe=8192,Ut=16384,Er=32768,Gn=1<<18,Kt=1<<19,Ct=Symbol("$state");function Yt(e){return e===this.v}function Jt(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function Zt(e){return!Jt(e,this.v)}function Nn(e){throw new Error("effect_in_teardown")}function Dn(){throw new Error("effect_in_unowned_derived")}function qn(e){throw new Error("effect_orphan")}function Ln(){throw new Error("effect_update_depth_exceeded")}function Fn(){throw new Error("state_unsafe_local_read")}function Vn(){throw new Error("state_unsafe_mutation")}let Ar=!1;function Wn(){Ar=!0}function pr(e){return{f:0,v:e,reactions:null,equals:Yt,version:0}}function tt(e,r=!1){var n;const t=pr(e);return r||(t.equals=Zt),Ar&&I!==null&&I.l!==null&&((n=I.l).s??(n.s=[])).push(t),t}function nt(e,r=!1){return Hn(tt(e,r))}function Hn(e){return C!==null&&C.f&pe&&(ue===null?oa([e]):ue.push(e)),e}function er(e,r){return C!==null&&_t()&&C.f&(pe|wr)&&(ue===null||!ue.includes(e))&&Vn(),Br(e,r)}function Br(e,r){return e.equals(r)||(e.v=r,e.version=gn(),Qt(e,Ae),_t()&&$!==null&&$.f&U&&!($.f&de)&&(F!==null&&F.includes(e)?(ie($,Ae),Cr($)):be===null?la([e]):be.push(e))),r}function Qt(e,r){var t=e.reactions;if(t!==null)for(var n=_t(),a=t.length,i=0;i<a;i++){var s=t[i],l=s.f;l&Ae||!n&&s===$||(ie(s,r),l&(U|Pe)&&(l&pe?Qt(s,Le):Cr(s)))}}const at=1,it=2,Xt=4,jn=8,Un=16,Kn=1,Yn=2,Jn=4,Zn=1,Qn=2;let Xn=!1;var Rr,en,rn,tn;function ea(){if(Rr===void 0){Rr=window,en=document;var e=Element.prototype,r=Node.prototype;rn=St(r,"firstChild").get,tn=St(r,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function st(e=""){return document.createTextNode(e)}function _r(e){return rn.call(e)}function $r(e){return tn.call(e)}function S(e,r){return _r(e)}function $e(e,r){{var t=_r(e);return t instanceof Comment&&t.data===""?$r(t):t}}function x(e,r=1,t=!1){let n=e;for(;r--;)n=$r(n);return n}function ra(e){e.textContent=""}function nn(e){var r=pe|Ae;$===null?r|=Pe:$.f|=Kt;const t={children:null,ctx:I,deps:null,equals:Yt,f:r,fn:e,reactions:null,v:null,version:0,parent:$};if(C!==null&&C.f&pe){var n=C;(n.children??(n.children=[])).push(t)}return t}function kt(e){const r=nn(e);return r.equals=Zt,r}function an(e){var r=e.children;if(r!==null){e.children=null;for(var t=0;t<r.length;t+=1){var n=r[t];n.f&pe?ot(n):Oe(n)}}}function sn(e){var r,t=$;fe(e.parent);try{an(e),r=mn(e)}finally{fe(t)}return r}function on(e){var r=sn(e),t=(Ne||e.f&Pe)&&e.deps!==null?Le:U;ie(e,t),e.equals(r)||(e.v=r,e.version=gn())}function ot(e){an(e),Ye(e,0),ie(e,Xe),e.v=e.children=e.deps=e.ctx=e.reactions=null}function ln(e){$===null&&C===null&&qn(),C!==null&&C.f&Pe&&Dn(),pt&&Nn()}function ta(e,r){var t=r.last;t===null?r.last=r.first=e:(t.next=e,e.prev=t,r.last=e)}function Fe(e,r,t,n=!0){var a=(e&br)!==0,i=$,s={ctx:I,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|Ae,first:null,fn:r,last:null,next:null,parent:a?null:i,prev:null,teardown:null,transitions:null,version:0};if(t){var l=De;try{Pt(!0),rr(s),s.f|=Ut}catch(u){throw Oe(s),u}finally{Pt(l)}}else r!==null&&Cr(s);var c=t&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&Kt)===0;if(!c&&!a&&n&&(i!==null&&ta(s,i),C!==null&&C.f&pe)){var f=C;(f.children??(f.children=[])).push(s)}return s}function un(e){const r=Fe(Qe,null,!1);return ie(r,U),r.teardown=e,r}function xt(e){ln();var r=$!==null&&($.f&de)!==0&&I!==null&&!I.m;if(r){var t=I;(t.e??(t.e=[])).push({fn:e,effect:$,reaction:C})}else{var n=Sr(e);return n}}function na(e){return ln(),ct(e)}function aa(e){const r=Fe(br,e,!0);return()=>{Oe(r)}}function Sr(e){return Fe(jt,e,!1)}function lt(e,r){var t=I,n={effect:null,ran:!1};t.l.r1.push(n),n.effect=ct(()=>{e(),!n.ran&&(n.ran=!0,er(t.l.r2,!0),tr(r))})}function ut(){var e=I;ct(()=>{if(b(e.l.r2)){for(var r of e.l.r1){var t=r.effect;t.f&U&&ie(t,Le),Ve(t)&&rr(t),r.ran=!1}e.l.r2.v=!1}})}function ct(e){return Fe(Qe,e,!0)}function oe(e){return ft(e)}function ft(e,r=0){return Fe(Qe|wr|r,e,!0)}function Ke(e,r=!0){return Fe(Qe|de,e,!0,r)}function cn(e){var r=e.teardown;if(r!==null){const t=pt,n=C;Ot(!0),ce(null);try{r.call(null)}finally{Ot(t),ce(n)}}}function fn(e){var r=e.deriveds;if(r!==null){e.deriveds=null;for(var t=0;t<r.length;t+=1)ot(r[t])}}function dn(e,r=!1){var t=e.first;for(e.first=e.last=null;t!==null;){var n=t.next;Oe(t,r),t=n}}function ia(e){for(var r=e.first;r!==null;){var t=r.next;r.f&de||Oe(r),r=t}}function Oe(e,r=!0){var t=!1;if((r||e.f&Gn)&&e.nodes_start!==null){for(var n=e.nodes_start,a=e.nodes_end;n!==null;){var i=n===a?null:$r(n);n.remove(),n=i}t=!0}dn(e,r&&!t),fn(e),Ye(e,0),ie(e,Xe);var s=e.transitions;if(s!==null)for(const c of s)c.stop();cn(e);var l=e.parent;l!==null&&l.first!==null&&vn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.parent=e.fn=e.nodes_start=e.nodes_end=null}function vn(e){var r=e.parent,t=e.prev,n=e.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),r!==null&&(r.first===e&&(r.first=n),r.last===e&&(r.last=t))}function Gr(e,r){var t=[];dt(e,t,!0),pn(t,()=>{Oe(e),r&&r()})}function pn(e,r){var t=e.length;if(t>0){var n=()=>--t||r();for(var a of e)a.out(n)}else r()}function dt(e,r,t){if(!(e.f&le)){if(e.f^=le,e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&r.push(s);for(var n=e.first;n!==null;){var a=n.next,i=(n.f&Er)!==0||(n.f&de)!==0;dt(n,r,i?t:!1),n=a}}}function hr(e){_n(e,!0)}function _n(e,r){if(e.f&le){Ve(e)&&rr(e),e.f^=le;for(var t=e.first;t!==null;){var n=t.next,a=(t.f&Er)!==0||(t.f&de)!==0;_n(t,a?r:!1),t=n}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||r)&&i.in()}}let Nr=!1,Dr=[];function sa(){Nr=!1;const e=Dr.slice();Dr=[],Mr(e)}function vt(e){Nr||(Nr=!0,queueMicrotask(sa)),Dr.push(e)}let gr=!1,De=!1,pt=!1;function Pt(e){De=e}function Ot(e){pt=e}let qr=[],je=0;let C=null;function ce(e){C=e}let $=null;function fe(e){$=e}let ue=null;function oa(e){ue=e}let F=null,Q=0,be=null;function la(e){be=e}let hn=0,Ne=!1,I=null;function gn(){return++hn}function _t(){return!Ar||I!==null&&I.l===null}function Ve(e){var s,l;var r=e.f;if(r&Ae)return!0;if(r&Le){var t=e.deps,n=(r&Pe)!==0;if(t!==null){var a;if(r&vr){for(a=0;a<t.length;a++)((s=t[a]).reactions??(s.reactions=[])).push(e);e.f^=vr}for(a=0;a<t.length;a++){var i=t[a];if(Ve(i)&&on(i),n&&$!==null&&!Ne&&!((l=i==null?void 0:i.reactions)!=null&&l.includes(e))&&(i.reactions??(i.reactions=[])).push(e),i.version>e.version)return!0}}n||ie(e,U)}return!1}function ua(e,r,t){throw e}function mn(e){var o;var r=F,t=Q,n=be,a=C,i=Ne,s=ue,l=I,c=e.f;F=null,Q=0,be=null,C=c&(de|br)?null:e,Ne=!De&&(c&Pe)!==0,ue=null,I=e.ctx;try{var f=(0,e.fn)(),u=e.deps;if(F!==null){var d;if(Ye(e,Q),u!==null&&Q>0)for(u.length=Q+F.length,d=0;d<F.length;d++)u[Q+d]=F[d];else e.deps=u=F;if(!Ne)for(d=Q;d<u.length;d++)((o=u[d]).reactions??(o.reactions=[])).push(e)}else u!==null&&Q<u.length&&(Ye(e,Q),u.length=Q);return f}finally{F=r,Q=t,be=n,C=a,Ne=i,ue=s,I=l}}function ca(e,r){let t=r.reactions;if(t!==null){var n=t.indexOf(e);if(n!==-1){var a=t.length-1;a===0?t=r.reactions=null:(t[n]=t[a],t.pop())}}t===null&&r.f&pe&&(F===null||!F.includes(r))&&(ie(r,Le),r.f&(Pe|vr)||(r.f^=vr),Ye(r,0))}function Ye(e,r){var t=e.deps;if(t!==null)for(var n=r;n<t.length;n++)ca(e,t[n])}function rr(e){var r=e.f;if(!(r&Xe)){ie(e,U);var t=$;$=e;try{r&wr?ia(e):dn(e),fn(e),cn(e);var n=mn(e);e.teardown=typeof n=="function"?n:null,e.version=hn}catch(a){ua(a)}finally{$=t}}}function fa(){je>1e3&&(je=0,Ln()),je++}function da(e){var r=e.length;if(r!==0){fa();var t=De;De=!0;try{for(var n=0;n<r;n++){var a=e[n];a.f&U||(a.f^=U);var i=[];yn(a,i),va(i)}}finally{De=t}}}function va(e){var r=e.length;if(r!==0)for(var t=0;t<r;t++){var n=e[t];!(n.f&(Xe|le))&&Ve(n)&&(rr(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?vn(n):n.fn=null))}}function pa(){if(gr=!1,je>1001)return;const e=qr;qr=[],da(e),gr||(je=0)}function Cr(e){gr||(gr=!0,queueMicrotask(pa));for(var r=e;r.parent!==null;){r=r.parent;var t=r.f;if(t&(br|de)){if(!(t&U))return;r.f^=U}}qr.push(r)}function yn(e,r){var t=e.first,n=[];e:for(;t!==null;){var a=t.f,i=(a&de)!==0,s=i&&(a&U)!==0;if(!s&&!(a&le))if(a&Qe){i?t.f^=U:Ve(t)&&rr(t);var l=t.first;if(l!==null){t=l;continue}}else a&jt&&n.push(t);var c=t.next;if(c===null){let d=t.parent;for(;d!==null;){if(e===d)break e;var f=d.next;if(f!==null){t=f;continue e}d=d.parent}}t=c}for(var u=0;u<n.length;u++)l=n[u],r.push(l),yn(l,r)}function b(e){var l;var r=e.f,t=(r&pe)!==0;if(t&&r&Xe){var n=sn(e);return ot(e),n}if(C!==null){ue!==null&&ue.includes(e)&&Fn();var a=C.deps;F===null&&a!==null&&a[Q]===e?Q++:F===null?F=[e]:F.push(e),be!==null&&$!==null&&$.f&U&&!($.f&de)&&be.includes(e)&&(ie($,Ae),Cr($))}else if(t&&e.deps===null){var i=e,s=i.parent;s!==null&&!((l=s.deriveds)!=null&&l.includes(i))&&(s.deriveds??(s.deriveds=[])).push(i)}return t&&(i=e,Ve(i)&&on(i)),e.v}function tr(e){const r=C;try{return C=null,e()}finally{C=r}}const _a=~(Ae|Le|U);function ie(e,r){e.f=e.f&_a|r}function Se(e,r=!1,t){I={p:I,c:null,e:null,m:!1,s:e,x:null,l:null},Ar&&!r&&(I.l={s:null,u:null,r1:[],r2:pr(!1)})}function Ce(e){const r=I;if(r!==null){const s=r.e;if(s!==null){var t=$,n=C;r.e=null;try{for(var a=0;a<s.length;a++){var i=s[a];fe(i.effect),ce(i.reaction),Sr(i.fn)}}finally{fe(t),ce(n)}}I=r.p,r.m=!0}return{}}function ha(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ct in e)Lr(e);else if(!Array.isArray(e))for(let r in e){const t=e[r];typeof t=="object"&&t&&Ct in t&&Lr(t)}}}function Lr(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Lr(e[n],r)}catch{}const t=zr(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=Ht(t);for(let a in n){const i=n[a].get;if(i)try{i.call(e)}catch{}}}}}function ga(e){var r=C,t=$;ce(null),fe(null);try{return e()}finally{ce(r),fe(t)}}const ma=new Set,Tt=new Set;function ya(e,r,t,n){function a(i){if(n.capture||We.call(r,i),!i.cancelBubble)return ga(()=>t.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?vt(()=>{r.addEventListener(e,a,n)}):r.addEventListener(e,a,n),a}function W(e,r,t,n,a){var i={capture:n,passive:a},s=ya(e,r,t,i);(r===document.body||r===window||r===document)&&un(()=>{r.removeEventListener(e,s,i)})}function We(e){var h;var r=this,t=r.ownerDocument,n=e.type,a=((h=e.composedPath)==null?void 0:h.call(e))||[],i=a[0]||e.target,s=0,l=e.__root;if(l){var c=a.indexOf(l);if(c!==-1&&(r===document||r===window)){e.__root=r;return}var f=a.indexOf(r);if(f===-1)return;c<=f&&(s=c)}if(i=a[s]||e.target,i!==r){Mn(e,"currentTarget",{configurable:!0,get(){return i||t}});var u=C,d=$;ce(null),fe(null);try{for(var o,p=[];i!==null;){var v=i.assignedSlot||i.parentNode||i.host||null;try{var y=i["__"+n];if(y!==void 0&&!i.disabled)if(Wt(y)){var[g,...m]=y;g.apply(i,[e,...m])}else y.call(i,e)}catch(A){o?p.push(A):o=A}if(e.cancelBubble||v===r||v===null)break;i=v}if(o){for(let A of p)queueMicrotask(()=>{throw A});throw o}}finally{e.__root=r,delete e.currentTarget,ce(u),fe(d)}}}function wa(e){var r=document.createElement("template");return r.innerHTML=e,r.content}function Fr(e,r){var t=$;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=r)}function T(e,r){var t=(r&Zn)!==0,n=(r&Qn)!==0,a,i=!e.startsWith("<!>");return()=>{a===void 0&&(a=wa(i?e:"<!>"+e),t||(a=_r(a)));var s=n?document.importNode(a,!0):a.cloneNode(!0);if(t){var l=_r(s),c=s.lastChild;Fr(l,c)}else Fr(s,s);return s}}function ht(){var e=document.createDocumentFragment(),r=document.createComment(""),t=st();return e.append(r,t),Fr(r,t),e}function P(e,r){e!==null&&e.before(r)}const ba=["touchstart","touchmove"];function Ea(e){return ba.includes(e)}let Vr=!0;function Wr(e,r){var t=r==null?"":typeof r=="object"?r+"":r;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t==null?"":t+"")}function Aa(e,r){return $a(e,r)}const Re=new Map;function $a(e,{target:r,anchor:t,props:n={},events:a,context:i,intro:s=!0}){ea();var l=new Set,c=d=>{for(var o=0;o<d.length;o++){var p=d[o];if(!l.has(p)){l.add(p);var v=Ea(p);r.addEventListener(p,We,{passive:v});var y=Re.get(p);y===void 0?(document.addEventListener(p,We,{passive:v}),Re.set(p,1)):Re.set(p,y+1)}}};c(rt(ma)),Tt.add(c);var f=void 0,u=aa(()=>{var d=t??r.appendChild(st());return Ke(()=>{if(i){Se({});var o=I;o.c=i}a&&(n.$$events=a),Vr=s,f=e(d,n)||{},Vr=!0,i&&Ce()}),()=>{var v;for(var o of l){r.removeEventListener(o,We);var p=Re.get(o);--p===0?(document.removeEventListener(o,We),Re.delete(o)):Re.set(o,p)}Tt.delete(c),It.delete(f),d!==t&&((v=d.parentNode)==null||v.removeChild(d))}});return It.set(f,u),f}let It=new WeakMap;function X(e,r,t,n=null,a=!1){var i=e,s=null,l=null,c=null,f=a?Er:0;ft(()=>{c!==(c=!!r())&&(c?(s?hr(s):s=Ke(()=>t(i)),l&&Gr(l,()=>{l=null})):(l?hr(l):n&&(l=Ke(()=>n(i))),s&&Gr(s,()=>{s=null})))},f)}let cr=null;function mr(e,r){return r}function Sa(e,r,t,n){for(var a=[],i=r.length,s=0;s<i;s++)dt(r[s].e,a,!0);var l=i>0&&a.length===0&&t!==null;if(l){var c=t.parentNode;ra(c),c.append(t),n.clear(),me(e,r[0].prev,r[i-1].next)}pn(a,()=>{for(var f=0;f<i;f++){var u=r[f];l||(n.delete(u.k),me(e,u.prev,u.next)),Oe(u.e,!l)}})}function qe(e,r,t,n,a,i=null){var s=e,l={flags:r,items:new Map,first:null},c=(r&Xt)!==0;if(c){var f=e;s=f.appendChild(st())}var u=null,d=!1;ft(()=>{var o=t(),p=Wt(o)?o:o==null?[]:rt(o),v=p.length;if(!(d&&v===0)){d=v===0;{var y=C;Ca(p,l,s,a,r,(y.f&le)!==0,n)}i!==null&&(v===0?u?hr(u):u=Ke(()=>i(s)):u!==null&&Gr(u,()=>{u=null})),t()}})}function Ca(e,r,t,n,a,i,s){var _e,ar,ir,re;var l=(a&jn)!==0,c=(a&(at|it))!==0,f=e.length,u=r.items,d=r.first,o=d,p,v=null,y,g=[],m=[],h,A,_,w;if(l)for(w=0;w<f;w+=1)h=e[w],A=s(h,w),_=u.get(A),_!==void 0&&((_e=_.a)==null||_e.measure(),(y??(y=new Set)).add(_));for(w=0;w<f;w+=1){if(h=e[w],A=s(h,w),_=u.get(A),_===void 0){var R=o?o.e.nodes_start:t;v=xa(R,r,v,v===null?r.first:v.next,h,A,w,n,a),u.set(A,v),g=[],m=[],o=v.next;continue}if(c&&ka(_,h,w,a),_.e.f&le&&(hr(_.e),l&&((ar=_.a)==null||ar.unfix(),(y??(y=new Set)).delete(_))),_!==o){if(p!==void 0&&p.has(_)){if(g.length<m.length){var z=m[0],k;v=z.prev;var Y=g[0],J=g[g.length-1];for(k=0;k<g.length;k+=1)zt(g[k],z,t);for(k=0;k<m.length;k+=1)p.delete(m[k]);me(r,Y.prev,J.next),me(r,v,Y),me(r,J,z),o=z,v=J,w-=1,g=[],m=[]}else p.delete(_),zt(_,o,t),me(r,_.prev,_.next),me(r,_,v===null?r.first:v.next),me(r,v,_),v=_;continue}for(g=[],m=[];o!==null&&o.k!==A;)(i||!(o.e.f&le))&&(p??(p=new Set)).add(o),m.push(o),o=o.next;if(o===null)continue;_=o}g.push(_),v=_,o=_.next}if(o!==null||p!==void 0){for(var q=p===void 0?[]:rt(p);o!==null;)(i||!(o.e.f&le))&&q.push(o),o=o.next;var M=q.length;if(M>0){var Z=a&Xt&&f===0?t:null;if(l){for(w=0;w<M;w+=1)(ir=q[w].a)==null||ir.measure();for(w=0;w<M;w+=1)(re=q[w].a)==null||re.fix()}Sa(r,q,Z,u)}}l&&vt(()=>{var O;if(y!==void 0)for(_ of y)(O=_.a)==null||O.apply()}),$.first=r.first&&r.first.e,$.last=v&&v.e}function ka(e,r,t,n){n&at&&Br(e.v,r),n&it?Br(e.i,t):e.i=t}function xa(e,r,t,n,a,i,s,l,c){var f=cr,u=(c&at)!==0,d=(c&Un)===0,o=u?d?tt(a):pr(a):a,p=c&it?pr(s):s,v={i:p,v:o,k:i,a:null,e:null,prev:t,next:n};cr=v;try{return v.e=Ke(()=>l(e,o,p),Xn),v.e.prev=t&&t.e,v.e.next=n&&n.e,t===null?r.first=v:(t.next=v,t.e.next=v.e),n!==null&&(n.prev=v,n.e.prev=v.e),v}finally{cr=f}}function zt(e,r,t){for(var n=e.next?e.next.e.nodes_start:t,a=r?r.e.nodes_start:t,i=e.e.nodes_start;i!==n;){var s=$r(i);a.before(i),i=s}}function me(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function Pa(e,r,t){Sr(()=>{var n=tr(()=>r(e,t==null?void 0:t())||{});if(n!=null&&n.destroy)return()=>n.destroy()})}function Oa(e,r){var t=e.__attributes??(e.__attributes={});t.value===(t.value=r)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r)}function wn(e,r,t,n){var a=e.__attributes??(e.__attributes={});a[r]!==(a[r]=t)&&("__styles"in e&&(e.__styles={}),t==null?e.removeAttribute(r):typeof t!="string"&&Ta(e).includes(r)?e[r]=t:e.setAttribute(r,t))}var Mt=new Map;function Ta(e){var r=Mt.get(e.nodeName);if(r)return r;Mt.set(e.nodeName,r=[]);for(var t,n=zr(e),a=Element.prototype;a!==n;){t=Ht(n);for(var i in t)t[i].set&&r.push(i);n=zr(n)}return r}function ne(e,r,t){if(t){if(e.classList.contains(r))return;e.classList.add(r)}else{if(!e.classList.contains(r))return;e.classList.remove(r)}}function ye(e,r,t,n){var a=e.__styles??(e.__styles={});a[r]!==t&&(a[r]=t,t==null?e.style.removeProperty(r):e.style.setProperty(r,t,""))}const Ia=()=>performance.now(),we={tick:e=>requestAnimationFrame(e),now:()=>Ia(),tasks:new Set};function bn(e){we.tasks.forEach(r=>{r.c(e)||(we.tasks.delete(r),r.f())}),we.tasks.size!==0&&we.tick(bn)}function za(e){let r;return we.tasks.size===0&&we.tick(bn),{promise:new Promise(t=>{we.tasks.add(r={c:e,f:t})}),abort(){we.tasks.delete(r)}}}function ur(e,r){e.dispatchEvent(new CustomEvent(r))}function Ma(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const r=e.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Bt(e){const r={},t=e.split(";");for(const n of t){const[a,i]=n.split(":");if(!a||i===void 0)break;const s=Ma(a.trim());r[s]=i.trim()}return r}const Ba=e=>e;function En(e,r,t){var n=cr,a,i,s,l=null;n.a??(n.a={element:e,measure(){a=this.element.getBoundingClientRect()},apply(){if(s==null||s.abort(),i=this.element.getBoundingClientRect(),a.left!==i.left||a.right!==i.right||a.top!==i.top||a.bottom!==i.bottom){const c=r()(this.element,{from:a,to:i},t==null?void 0:t());s=yr(this.element,c,void 0,1,()=>{s==null||s.abort(),s=void 0})}},fix(){if(!e.getAnimations().length){var{position:c,width:f,height:u}=getComputedStyle(e);if(c!=="absolute"&&c!=="fixed"){var d=e.style;l={position:d.position,width:d.width,height:d.height,transform:d.transform},d.position="absolute",d.width=f,d.height=u;var o=e.getBoundingClientRect();if(a.left!==o.left||a.top!==o.top){var p=`translate(${a.left-o.left}px, ${a.top-o.top}px)`;d.transform=d.transform?`${d.transform} ${p}`:p}}}},unfix(){if(l){var c=e.style;c.position=l.position,c.width=l.width,c.height=l.height,c.transform=l.transform}}}),n.a.element=e}function E(e,r,t,n){var a=(e&Kn)!==0,i=(e&Yn)!==0,s=a&&i,l=(e&Jn)!==0,c=s?"both":a?"in":"out",f,u=r.inert,d,o;function p(){var h=C,A=$;ce(null),fe(null);try{return f??(f=t()(r,(n==null?void 0:n())??{},{direction:c}))}finally{ce(h),fe(A)}}var v={is_global:l,in(){var h;if(r.inert=u,!a){o==null||o.abort(),(h=o==null?void 0:o.reset)==null||h.call(o);return}i||d==null||d.abort(),ur(r,"introstart"),d=yr(r,p(),o,1,()=>{ur(r,"introend"),d==null||d.abort(),d=f=void 0})},out(h){if(!i){h==null||h(),f=void 0;return}r.inert=!0,ur(r,"outrostart"),o=yr(r,p(),d,0,()=>{ur(r,"outroend"),h==null||h()})},stop:()=>{d==null||d.abort(),o==null||o.abort()}},y=$;if((y.transitions??(y.transitions=[])).push(v),a&&Vr){var g=l;if(!g){for(var m=y.parent;m&&m.f&Er;)for(;(m=m.parent)&&!(m.f&wr););g=!m||(m.f&Ut)!==0}g&&Sr(()=>{tr(()=>v.in())})}}function yr(e,r,t,n,a){var i=n===1;if(Bn(r)){var s,l=!1;return vt(()=>{if(!l){var g=r({direction:i?"in":"out"});s=yr(e,g,t,n,a)}}),{abort:()=>{l=!0,s==null||s.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(t==null||t.deactivate(),!(r!=null&&r.duration))return a(),{abort:ae,deactivate:ae,reset:ae,t:()=>n};const{delay:c=0,css:f,tick:u,easing:d=Ba}=r;var o=[];if(i&&t===void 0&&(u&&u(0,1),f)){var p=Bt(f(0,1));o.push(p,p)}var v=()=>1-n,y=e.animate(o,{duration:c});return y.onfinish=()=>{var g=(t==null?void 0:t.t())??1-n;t==null||t.abort();var m=n-g,h=r.duration*Math.abs(m),A=[];if(h>0){if(f)for(var _=Math.ceil(h/16.666666666666668),w=0;w<=_;w+=1){var R=g+m*d(w/_),z=f(R,1-R);A.push(Bt(z))}v=()=>{var k=y.currentTime;return g+m*d(k/h)},u&&za(()=>{if(y.playState!=="running")return!1;var k=v();return u(k,1-k),!0})}y=e.animate(A,{duration:h,fill:"forwards"}),y.onfinish=()=>{v=()=>n,u==null||u(n,1-n),a()}},{abort:()=>{y&&(y.cancel(),y.effect=null,y.onfinish=ae)},deactivate:()=>{a=ae},reset:()=>{n===0&&(u==null||u(1,0))},t:()=>v()}}function An(e){var r=!1;return function(...t){if(!r)return r=!0,e==null?void 0:e.apply(this,t)}}function Te(e=!1){const r=I,t=r.l.u;if(!t)return;let n=()=>ha(r.s);if(e){let a=0,i={};const s=nn(()=>{let l=!1;const c=r.s;for(const f in c)c[f]!==i[f]&&(i[f]=c[f],l=!0);return l&&a++,a});n=()=>b(s)}t.b.length&&na(()=>{Rt(r,n),Mr(t.b)}),xt(()=>{const a=tr(()=>t.m.map(Rn));return()=>{for(const i of a)typeof i=="function"&&i()}}),t.a.length&&xt(()=>{Rt(r,n),Mr(t.a)})}function Rt(e,r){if(e.l.s)for(const t of e.l.s)b(t);r()}function $n(e,r,t){if(e==null)return r(void 0),ae;const n=tr(()=>e.subscribe(r,t));return n.unsubscribe?()=>n.unsubscribe():n}function D(e,r,t){const n=t[r]??(t[r]={store:null,source:tt(void 0),unsubscribe:ae});if(n.store!==e)if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=ae;else{var a=!0;n.unsubscribe=$n(e,i=>{a?n.source.v=i:er(n.source,i)}),a=!1}return b(n.source)}function nr(){const e={};return un(()=>{for(var r in e)e[r].unsubscribe()}),e}const Ra="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ra);Wn();let Je,Or;const fr="/grinchs-bar/",Sn={gunShot:"sound/gun_shot.mp3",playerDead:"sound/player_game_over.mp3",revolverClear:"sound/revolver_clear.mp3",revolverSpin:"sound/revolver_spin.mp3",liar:"sound/liar.mp3",gong:"sound/gong.mp3",cardsFlip:"sound/cards_flip.mp3",whoosh:"sound/whoosh.mp3",deepWhoosh:"sound/deep_whoosh.mp3",cardSpinWhoosh:"sound/card_spin_whoosh.mp3",singleCardFlip:"sound/single_card_flip.mp3"};function Ee(e){const r=new Audio(fr+Sn[e]);Je.createMediaElementSource(r).connect(Je.destination),r.play().then(()=>r.remove())}const Ue={gameStart:new Audio(fr+"music/game_start.mp3"),gameEnd:new Audio(fr+"music/game_end.mp3"),intro:new Audio(fr+"music/intro.mp3")};function Hr(e,r){return Ue[e].currentTime=0,Ue[e].volume=1,Ue[e].play()}async function Ga(e,r){const t=Ue[e];return new Promise(n=>{const i=t.volume/(r/50);let s=0;const l=setInterval(()=>{s+=50,t.volume>0&&s<r?t.volume=Math.max(0,t.volume-i):(clearInterval(l),t.pause(),n())},50)})}function Na(e,r){Se(r,!1),Te(),W("click",Rr,An(()=>{Je=new(window.AudioContext||window.webkitAudioContext),Or=new(window.AudioContext||window.webkitAudioContext),Object.values(Ue).forEach(t=>{Or.createMediaElementSource(t).connect(Or.destination)})})),Ce()}var se=(e=>(e[e.Preperation=0]="Preperation",e[e.InProcess=1]="InProcess",e[e.GameEnded=2]="GameEnded",e))(se||{}),N=(e=>(e.Ace="Ace",e.King="King",e.Queen="Queen",e.Jack="Jack",e.Joker="Joker",e.Devil="Devil",e))(N||{});const Ge=[];function V(e,r=ae){let t=null;const n=new Set;function a(l){if(Jt(e,l)&&(e=l,t)){const c=!Ge.length;for(const f of n)f[1](),Ge.push(f,e);if(c){for(let f=0;f<Ge.length;f+=2)Ge[f][0](Ge[f+1]);Ge.length=0}}}function i(l){a(l(e))}function s(l,c=ae){const f=[l,c];return n.add(f),n.size===1&&(t=r(a,i)||ae),l(e),()=>{n.delete(f),n.size===0&&t&&(t(),t=null)}}return{set:a,update:i,subscribe:s}}function gt(e){let r;return $n(e,t=>r=t)(),r}function B(e){return new Promise(r=>setTimeout(r,e*1e3))}function xe(e=1,r=0){if(r>e)throw new Error("Min should be less than or equal to Max.");const t=crypto.getRandomValues(new Uint32Array(1))[0];return r+t%(e-r+1)}const Da=e=>e;function ee(e,{delay:r=0,duration:t=400,easing:n=Da}={}){const a=+getComputedStyle(e).opacity;return{delay:r,duration:t,easing:n,css:i=>`opacity: ${i*a}`}}function H(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function mt(e){const r=e-1;return r*r*r+1}function qa(e){return Math.sin(-13*(e+1)*Math.PI/2)*Math.pow(2,-10*e)+1}function La(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}function Fa(e){return--e*e*e*e*e+1}function Va(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)}function Wa(e){return 2.70158*e*e*e-1.70158*e*e}function ve(e,r){return{delay:r==null?void 0:r.delay,duration:(r==null?void 0:r.duration)??300,easing:(r==null?void 0:r.easing)??H,css:t=>`opacity: ${t}; transform: scale(${t});`}}function Gt(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}async function Nt(e,r,t){if(gt(dr)||r.length<1)return;dr.set(!0),Ee(e==="liar"?"liar":"gong"),e==="liar"?(Ur.set(!0),await B(3)):(Ee("cardSpinWhoosh"),Kr.set(!0),await B(4),Kr.set(!1),await B(1)),Yr.set(!0),await Ee("revolverSpin"),t===!0?await B(2.4):await B(5);const n=r.map(([a,i])=>{const s=new Audio(Sn[a?"gunShot":"revolverClear"]);return Je.createMediaElementSource(s).connect(Je.destination),[a,i,()=>s.play().then(()=>s.remove())]});for(const[a,i,s]of n)i(),a&&(jr.set(!0),jr.set(!1)),s(),await B(.5);Yr.set(!1),dr.set(!1)}function Ha(e){e.style.visibility="hidden",jr.subscribe(r=>{r&&(e.style.visibility="unset",setTimeout(()=>{e.style.visibility="hidden"},50))})}const jr=V(!1),dr=V(!1),Ur=V(!1),Kr=V(!1),Yr=V(!1);var ja=T('<div id="LiarHand" class="action-container svelte-154svea"><div class="liar-hand-wrapper svelte-154svea"><img src="/liar_hand.png" alt="Liar!" class="svelte-154svea"></div></div>'),Ua=T(`<div id="DevilCardTriggered" class="action-container svelte-154svea"><div class="devil-card-wrapper svelte-154svea"><div class="playing-card svelte-154svea"><div class="front svelte-154svea" style="background-image: url('playing_card/Devil.png')"></div> <div class="back svelte-154svea" style="background-image: url('playing_card/back.png')"></div></div></div></div>`),Ka=T('<div id="RevolverChamber" class="action-container svelte-154svea"><div class="img-wrapper svelte-154svea"><img src="/revolver_chamber.png" alt="banner" class="svelte-154svea"></div> <div class="flash svelte-154svea"></div></div>'),Ya=T('<div id="RevolverActions" class="svelte-154svea"><!> <!> <!></div>');function Ja(e,r){Se(r,!1);const t=nr(),n=()=>D(dr,"$revolverActionVisible",t),a=()=>D(Ur,"$liarHandVisible",t),i=()=>D(Kr,"$devilCardVisible",t),s=()=>D(Yr,"$revolverChamberVisible",t);function l(d){return{duration:400,easing:Gt,css:o=>`opacity: ${o}; transform: scale(${o});`}}function c(d){return{duration:2e3,css:o=>{const p=Gt(o);return`opacity: ${o}; transform: translateY(${20-20*p}rem) scale(${p});`}}}Te();var f=ht(),u=$e(f);X(u,n,d=>{var o=Ya(),p=S(o);X(p,a,g=>{var m=ja(),h=S(m);E(5,h,()=>l),E(6,h,()=>ee,()=>({duration:500})),W("introend",h,()=>setTimeout(()=>Ur.set(!1),1500)),P(g,m)});var v=x(p,2);X(v,i,g=>{var m=Ua(),h=S(m);E(5,h,()=>c),E(6,h,()=>ee,()=>({easing:H,duration:500})),P(g,m)});var y=x(v,2);X(y,s,g=>{var m=Ka(),h=S(m),A=x(h,2);Pa(A,_=>Ha(_)),E(5,h,()=>ve,()=>({duration:500})),P(g,m)}),E(5,o,()=>ee,()=>({duration:500})),E(6,o,()=>ee,()=>({easing:H,duration:200})),P(d,o)}),P(e,f),Ce()}var Za=T('<div class="playing-card svelte-1torxv3"><div class="front svelte-1torxv3"></div></div>'),Qa=T('<div class="start-screen-background svelte-1torxv3"></div>');function Xa(e,r){Se(r,!1);const t=Array.from({length:40},(i,s)=>{let l=null;if(Math.random()>.2){const d=xe(Object.keys(N).length);l=Object.values(N)[d]}const c=Math.random()*96+2,f=Math.random()*96+2,u=xe(90);return{card:l,x:c,y:f,rotate:u}});function n(i,{rotate:s,cardIndex:l}){const c=xe(4,2),f=c*3;return{easing:mt,delay:15*l,duration:400+c*xe(200),css:u=>`transform: rotate(${s*u}deg) scale(${c-(c-1)*u});filter: blur(${f-f*u}px);opacity: ${u};`}}Te();var a=Qa();qe(a,5,()=>t,mr,(i,s,l)=>{let c=()=>b(s).card,f=()=>b(s).x,u=()=>b(s).y,d=()=>b(s).rotate;var o=Za(),p=S(o);oe(()=>{ye(o,"left",`${f()??""}%`),ye(o,"top",`${u()??""}%`),ye(o,"transform",`rotate(${d()??""}deg)`),ye(p,"background-image",`url('playing_card/${(c()||"back")??""}.png')`)}),E(5,o,()=>n,()=>({rotate:d(),cardIndex:l})),P(i,o)}),E(6,a,()=>ee,()=>({easing:H,duration:1e3})),P(e,a),Ce()}function Cn(e,{from:r,to:t},n={}){var a=getComputedStyle(e),i=ei(e),s=a.transform==="none"?"":a.transform,[l,c]=a.transformOrigin.split(" ").map(parseFloat),f=r.width/t.width,u=r.height/t.height,d=(r.left+f*l-(t.left+l))/i,o=(r.top+u*c-(t.top+c))/i,{delay:p=0,duration:v=g=>Math.sqrt(g)*120,easing:y=mt}=n;return{delay:p,duration:typeof v=="function"?v(Math.sqrt(d*d+o*o)):v,easing:y,css:(g,m)=>{var h=m*d,A=m*o,_=g+m*f,w=g+m*u;return`transform: ${s} scale(${_}, ${w}) translate(${h}px, ${A}px);`}}}function ei(e){if("currentCSSZoom"in e)return e.currentCSSZoom;for(var r=e,t=1;r!==null;)t*=+getComputedStyle(r).zoom,r=r.parentElement;return t}function Dt(){Hr("intro"),yt.set(!0)}async function qt(){yt.set(!1),await Ga("intro",2e3)}const yt=V(!1);var ri=T('<div class="entry svelte-zazxg8"><input type="text" class="svelte-zazxg8"> <button class="remove-player button-3d red small no-underline svelte-zazxg8">❌</button></div>'),ti=T(`<!> <div class="modal-container svelte-zazxg8"><div class="players-overview svelte-zazxg8"><div class="header svelte-zazxg8"><div id="GameLogo" class="svelte-zazxg8"><h1 class="svelte-zazxg8">Grinch's Bar</h1> <img src="/banner.png" alt="banner" class="svelte-zazxg8"></div></div> <div class="players-list svelte-zazxg8"><!> <div class="add-player entry svelte-zazxg8"><button class=" button-3d svelte-zazxg8">+ Add Player</button></div></div> <div class="actions svelte-zazxg8"><button class="start-game button-3d solid-green svelte-zazxg8">Start Game</button></div></div></div>`,1);function ni(e,r){Se(r,!1);const t=nr(),n=()=>D(j,"$GrinchsBar",t),a=()=>D(yt,"$preparationMenuVisible",t),i=nt();function s(o){return{delay:500,duration:2e3,easing:mt,css:p=>`opacity: ${p}; transform: scale(${2-1*p}); filter: blur(${10-10*p}px);`}}function l(o){return{duration:1500,easing:H,css:p=>`opacity: ${p}; transform: scale(${.85+.15*p});`}}function c(o){const p=o.clientHeight;return{duration:200,easing:H,css:v=>`opacity: ${v}; overflow: hidden; height: ${p*v}px; margin-top: ${1*v}rem;`}}function f(o){return{duration:1500,easing:H,css:p=>`opacity: ${p}; transform: translateY(-${8-8*p}rem) scale(${2-1*p});`}}lt(()=>n(),()=>{er(i,n().players.length<2||n().players.some(o=>!o.name))}),ut(),Te();var u=ht(),d=$e(u);X(d,a,o=>{var p=ti(),v=$e(p);Xa(v,{});var y=x(v,2),g=S(y),m=S(g),h=x(m,2),A=S(h);qe(A,11,()=>n().players,k=>k.name,(k,Y,J)=>{var q=ri(),M=S(q),Z=x(M,2);oe(()=>Oa(M,b(Y).name)),W("change",M,_e=>j.updatePlayerName(b(J),_e.currentTarget.value)),W("click",Z,()=>j.removePlayer(b(J))),En(q,()=>Cn,()=>({easing:H})),E(3,q,()=>c),P(k,q)});var _=x(A,2),w=S(_),R=x(h,2),z=S(R);oe(()=>z.disabled=b(i)),E(5,m,()=>f),W("click",w,()=>j.addPlayer()),W("click",z,()=>j.startGame()),E(5,g,()=>s),E(2,g,()=>l),P(o,p)}),P(e,u),Ce()}const He=V([]);async function Lt(){He.set(Object.keys(j.$().cardsInGame).map(()=>[!0,!1])),Jr.set(!0),await B(1),Ee("whoosh"),await B(2),Ee("cardsFlip");const e=gt(He).length;for(let r=0;r<e;(r+=1)-1)He.update(t=>(t[r][0]=!1,t)),await B(.1);await B(1);for(let r=0;r<e;(r+=1)-1)He.update(t=>(t[r][1]=!0,t)),await B(.1);await new Promise(r=>{Zr.set(()=>r())}),Zr.set(null),Ee("deepWhoosh"),Jr.set(!1),await B(.1)}const Jr=V(!1),Zr=V(null);var ai=T('<span class="playing-card-count svelte-2dy7mq"> </span>'),ii=T(`<div class="card-slot svelte-2dy7mq"><div class="playing-card svelte-2dy7mq"><div class="front svelte-2dy7mq"></div> <div class="back svelte-2dy7mq" style="background-image: url('playing_card/back.png')"></div> <!></div></div>`),si=T('<div id="PlayingCardsInGame" class="svelte-2dy7mq"><div class="cards-container svelte-2dy7mq"></div> <button class="players-ready button-3d svelte-2dy7mq">Continue</button></div>');function oi(e,r){Se(r,!1);const t=nr(),n=()=>D(j,"$GrinchsBar",t),a=()=>D(Zr,"$playersAreReadyPromiseResolver",t),i=()=>D(Jr,"$showPlayingCardsInGame",t),s=()=>D(He,"$cardsState",t),l=nt();function c(v){const g=v.offsetParent.offsetWidth/2-v.offsetWidth/2,m=v.parentElement;m.style.width=v.offsetWidth+"px",m.style.height=v.offsetHeight+"px";const h=2500,A=1e3,_=h-A,w=A/h;return{duration:h,css:R=>{if(R<w)return`position: absolute; left: ${g}px;`;const z=La((h*R-A)/_);return`position: absolute;left: ${g+(v.offsetLeft-g)*z}px;`}}}function f(v,{cardIndex:y}){return{easing:Wa,delay:30*y,duration:500,css:g=>`opacity: ${g}; transform: scale(${.75+.25*g})`}}function u(v){return{duration:2e3,easing:Fa,css:y=>`transform: scale(${1.5-.5*y});`}}function d(){a()!==null&&a()()}lt(()=>n(),()=>{er(l,Object.keys(n().cardsInGame).length)}),ut(),Te();var o=ht(),p=$e(o);X(p,i,v=>{var y=si(),g=S(y);qe(g,5,()=>Object.entries(n().cardsInGame),mr,(h,A,_)=>{let w=()=>b(A)[0],R=()=>b(A)[1];var z=ii(),k=S(z),Y=S(k),J=x(Y,4);X(J,()=>s()[_][1],q=>{var M=ai(),Z=S(M);oe(()=>Wr(Z,R())),E(5,M,()=>ve,()=>({duration:1e3,easing:Va})),P(q,M)}),oe(()=>{ne(k,"flipped",s()[_][0]),ye(k,"z-index",b(l)-_),wn(Y,"style",`background-image: url('playing_card/${w()??""}.png')`)}),E(5,k,()=>c),E(6,k,()=>f,()=>({cardIndex:_})),P(h,z)});var m=x(g,2);E(5,g,()=>u),W("click",m,d),E(1,m,()=>ve,()=>({delay:6e3,duration:1e3})),E(2,m,()=>ve,()=>({duration:500})),E(1,y,()=>ee,()=>({duration:1e3})),E(2,y,()=>ee,()=>({easing:H,delay:550,duration:200})),P(v,y)}),P(e,o),Ce()}var G,Ze,Qr;class li{constructor(){xr(this,Ze);xr(this,G,V({userConsentForSound:!1,gameState:se.Preperation,players:[{name:"Me, myself & I",loadedBulletInSlot:0,triggers:-1}],winner:-1,cardsInGame:{[N.King]:8,[N.Queen]:8,[N.Jack]:8,[N.Ace]:8,[N.Joker]:2,[N.Devil]:2},cardOfTheRound:N.King}));At(this,"subscribe",L(this,G).subscribe)}$(){return gt(this)}consentOfUserGiven(){if(this.$().userConsentForSound)return;L(this,G).update(t=>(t.userConsentForSound=!0,t)),Dt();const r={presentPlayingCardsInGame:()=>{Lt()},quickGameStart:async()=>{const t=this.$();t.gameState===se.Preperation&&(t.players.length<2||t.players.some(n=>!n.name)||(L(this,G).update(n=>(n.winner=-1,n.gameState=se.InProcess,n.players.forEach((a,i)=>{n.players[i].triggers=-1,n.players[i].loadedBulletInSlot=0}),n)),await qt(),Ft(),Tr(this.$().cardOfTheRound)))},updateCardOfRound:()=>{Pr(this,Ze,Qr).call(this)},exitGame:()=>{this.exitGame()},updateRevolverChamber:()=>{L(this,G).update(t=>(t.players.forEach((n,a)=>{t.players[a].triggers=-1,t.players[a].loadedBulletInSlot=xe(5)}),t))},randomWinner:()=>{L(this,G).update(t=>(t.winner=t.players.length-1,t))},resetWinner:()=>{L(this,G).update(t=>(t.winner=-1,t))}};window.GrinchsBarDebug=r}addPlayer(){L(this,G).update(r=>(r.players.length<8&&r.players.push({name:"",triggers:-1,loadedBulletInSlot:0}),r))}updatePlayerName(r,t){L(this,G).update(n=>(n.players[r].name=t,n))}removePlayer(r){L(this,G).update(t=>(t.players.length===1?t.players[0].name="":t.players.splice(r,1),t))}getCardsAmountByPlayersAmount(r){const a=Math.floor(r*5/4),i=Math.ceil(r/2),s=Math.ceil(r/4);return{[N.King]:a,[N.Queen]:a,[N.Jack]:a,[N.Ace]:a,[N.Joker]:i,[N.Devil]:s}}async startGame(){const r=this.$();r.gameState!==se.InProcess&&(r.players.length<2||r.players.some(t=>!t.name)||(r.gameState===se.GameEnded&&Vt(),L(this,G).update(t=>(t.winner=-1,t.gameState=se.InProcess,t.cardsInGame=this.getCardsAmountByPlayersAmount(t.players.length),t.players.forEach((n,a)=>{t.players[a].triggers=-1,t.players[a].loadedBulletInSlot=xe(5)}),t)),await qt(),Hr("gameStart"),await Lt(),Ft(),Tr(this.$().cardOfTheRound)))}async exitGame(){this.$().gameState!==se.Preperation&&(L(this,G).update(t=>(t.gameState=se.Preperation,t)),Vt(),await B(2),Dt())}async lastPlayerWon(){const t=this.$().players.map((n,a)=>({...n,index:a})).filter(({triggers:n,loadedBulletInSlot:a})=>n<a);t.length>1||(await B(.5),Hr("gameEnd"),L(this,G).update(n=>(n.gameState=se.GameEnded,n.winner=t[0].index,n)))}async playerDied(r){const n=this.$().players.filter(a=>a.triggers<a.loadedBulletInSlot);await B(1),n.length<2?this.lastPlayerWon():(r&&(Ee("playerDead"),await B(2)),Pr(this,Ze,Qr).call(this))}async playerLied(r){const n=this.$().players[r];if(n.triggers>=n.loadedBulletInSlot)return;const a=n.triggers+1===n.loadedBulletInSlot;await Nt("liar",[[a,()=>{L(this,G).update(i=>(i.players[r].triggers+=1,i))}]],a&&n.loadedBulletInSlot===5),await this.playerDied(a)}async devilCard(r){const t=this.$(),a=t.players.map((s,l)=>({...s,index:l})).filter(s=>s.index!==r&&s.triggers<s.loadedBulletInSlot);if(a.length<1)return;let i=!1;await Nt("devil",a.map(({index:s})=>{const l=t.players[s],c=l.triggers+1===l.loadedBulletInSlot;return c&&(i=!0),[c,()=>{L(this,G).update(f=>(f.players[s].triggers+=1,f))}]})),await this.playerDied(i)}}G=new WeakMap,Ze=new WeakSet,Qr=function(){L(this,G).update(r=>{const t=Object.keys(N),n=xe(t.length-3);return r.cardOfTheRound=t[n],Tr(r.cardOfTheRound),r})};const j=new li,wt=V(!1),Ft=()=>{wt.set(!0)},Vt=()=>{wt.set(!1)};async function Tr(e){Xr.set(!0),await B(2),et.set(!0),kn.set(e),await B(.65),Ee("singleCardFlip"),Xr.set(!1),await B(2),et.set(!1)}const Xr=V(!0),et=V(!1),kn=V(N.King),Ir=V(null);var ui=T('<img src="/boom.png" alt="BOOM" class="svelte-1l7z6li">'),ci=T('<div class="player-revolver-slot svelte-1l7z6li"><!></div>'),fi=T('<button class="player svelte-1l7z6li"><div class="border svelte-1l7z6li"></div> <span class="player-name svelte-1l7z6li"> </span> <div class="player-revolver-chamber svelte-1l7z6li"></div></button>'),di=T('<div class="game-menu-actions svelte-1l7z6li"><button class="button-3d red svelte-1l7z6li"><span class="svelte-1l7z6li">Exit</span></button></div>'),vi=T('<img src="/boom.png" alt="BOOM" class="svelte-1l7z6li">'),pi=T('<div class="player-revolver-slot svelte-1l7z6li"><!></div>'),_i=T('<div class="game-winner-container modal-container svelte-1l7z6li"><div class="game-winner modal svelte-1l7z6li"><div class="player-wrapper svelte-1l7z6li"><div class="player svelte-1l7z6li"><div class="border svelte-1l7z6li"></div> <span class="player-name svelte-1l7z6li"> </span> <div class="player-revolver-chamber svelte-1l7z6li"></div> <img class="crown svelte-1l7z6li" src="/crown.png" alt="crown"></div></div> <div class="actions svelte-1l7z6li"><button class="button-3d red svelte-1l7z6li">Exit</button> <button class="button-3d solid-green svelte-1l7z6li">Next Game</button></div></div></div>'),hi=T(`<div id="GameBoard" class="svelte-1l7z6li"><div id="CardOfTheRound" class="svelte-1l7z6li"><div class="playing-card-wrapper svelte-1l7z6li"><div class="playing-card svelte-1l7z6li"><div class="front svelte-1l7z6li"></div> <div class="back svelte-1l7z6li" style="background-image: url('playing_card/back.png')"></div></div></div></div> <div class="game-actions svelte-1l7z6li"><button class="trigger button-3d no-underline svelte-1l7z6li">Liar❗</button> <button class="devil-card button-3d no-underline svelte-1l7z6li">Devil card used 👹</button></div> <div class="players svelte-1l7z6li"></div> <!></div> <!>`,1),gi=T("<!> <!>",1);function mi(e,r){Se(r,!1);const t=nr(),n=()=>D(j,"$GrinchsBar",t),a=()=>D(Ir,"$selectPlayerAction",t),i=()=>D(y,"$playerCardElPos",t),s=()=>D(wt,"$gameBoardVisible",t),l=()=>D(et,"$cardOfTheRoundNewCardAnim",t),c=()=>D(Xr,"$cardOfTheRoundFlipped",t),f=()=>D(kn,"$cardOfTheRound",t),u=nt();function d(_){Ir.set(a()!==null?null:_)}function o(_){switch(a()){case"liar":{j.playerLied(_);break}case"devil":{j.devilCard(_);break}}Ir.set(null)}function p(_){return{duration:1e3,easing:H,css:w=>`opacity: ${w}; transform: scale(${.75+.25*w});`}}function v(_){return{duration:1500,easing:H,css:w=>`opacity: ${w}; transform: translateY(${6-6*w}rem) scale(${.85+.15*w});`}}const y=V({});function g(_,{isWinner:w,playerIndex:R}){if(!w)return{};const[z,k]=i()[R],Y=window.innerHeight/2-_.offsetHeight/2-65,J=window.innerWidth/2-_.offsetWidth/2,q=k-Y,M=z-J;return{duration:1500,easing:H,css:Z=>`z-index: 999; position: absolute; left: 0px; top: 0px;transform: translate(${J+M*Z}px, ${Y+q*Z}px);`}}lt(()=>n(),()=>{er(u,n().winner!==-1?n().players[n().winner]:null)}),ut(),Te();var m=gi(),h=$e(m);oi(h,{});var A=x(h,2);X(A,s,_=>{var w=hi(),R=$e(w),z=S(R),k=S(z),Y=S(k),J=S(Y),q=x(z,2),M=S(q),Z=x(M,2),_e=x(q,2);qe(_e,15,()=>n().players.filter((re,O)=>O!==n().winner),re=>re.name,(re,O,te)=>{var K=fi();const ke=kt(()=>b(O).triggers===b(O).loadedBulletInSlot),sr=kt(()=>b(te)===n().winner);var or=x(S(K),2),lr=S(or),kr=x(or,2);qe(kr,4,()=>Array.from({length:6}),mr,(Ie,ze,he)=>{var Me=ci(),bt=S(Me);X(bt,()=>he===b(O).loadedBulletInSlot&&he<=b(O).triggers,ge=>{var Be=ui();P(ge,Be)}),oe(()=>{ne(Me,"clear",he!==b(O).loadedBulletInSlot&&he<=b(O).triggers),ne(Me,"peng",he===b(O).loadedBulletInSlot&&he<=b(O).triggers)}),P(Ie,Me)}),oe(()=>{K.disabled=b(ke),ne(K,"dead",b(ke)),ye(K,"background-image",`url('/player${(b(ke)?"_dead":"")??""}.png')`),ye(K,"animation-delay",`${b(te)*30}ms`),Wr(lr,b(O).name)}),En(K,()=>Cn,()=>({duration:1500,easing:H})),E(5,K,()=>ve,()=>({duration:1e3,delay:25*b(te)})),W("introend",K,Ie=>{y.update(ze=>(ze[b(te)]=[Ie.currentTarget.offsetLeft,Ie.currentTarget.offsetTop],ze))}),E(2,K,()=>g,()=>({isWinner:b(sr),playerIndex:b(te)})),W("click",K,()=>o(b(te))),P(re,K)});var ar=x(_e,2);X(ar,()=>n().winner===-1,re=>{var O=di(),te=S(O);W("click",te,()=>j.exitGame()),E(2,O,()=>ve,()=>({duration:1e3})),P(re,O)});var ir=x(R,2);X(ir,()=>b(u)!==null,re=>{var O=_i(),te=S(O),K=S(te),ke=S(K);ye(ke,"background-image","url('/player.png')");var sr=x(S(ke),2),or=S(sr),lr=x(sr,2);qe(lr,4,()=>Array.from({length:6}),mr,(Me,bt,ge)=>{var Be=pi(),xn=S(Be);X(xn,()=>ge===b(u).loadedBulletInSlot&&ge<=b(u).triggers,Pn=>{var On=vi();P(Pn,On)}),oe(()=>{ne(Be,"clear",ge!==b(u).loadedBulletInSlot&&ge<=b(u).triggers),ne(Be,"peng",ge===b(u).loadedBulletInSlot&&ge<=b(u).triggers)}),P(Me,Be)});var kr=x(lr,2),Ie=x(K,2),ze=S(Ie),he=x(ze,2);oe(()=>Wr(or,b(u).name)),E(5,kr,()=>ve,()=>({delay:2e3,duration:1e3,easing:qa})),E(5,ke,()=>ee,()=>({delay:1500,duration:1})),W("click",ze,()=>j.exitGame()),W("click",he,()=>j.startGame()),E(5,te,()=>v),E(5,O,()=>ee,()=>({easing:H,duration:1e3})),E(6,O,()=>ee,()=>({easing:H,duration:500})),P(re,O)}),oe(()=>{ne(k,"new-card-anim",l()),ne(Y,"flipped",c()),wn(J,"style",`background-image: url('playing_card/${f()??""}.png')`),M.disabled=a()==="devil",ne(M,"active",a()==="liar"),Z.disabled=a()==="liar",ne(Z,"active",a()==="devil"),ne(_e,"selecting",a()!==null)}),E(5,z,()=>p),E(5,M,()=>ve,()=>({duration:1e3})),W("click",M,()=>d("liar")),E(5,Z,()=>ve,()=>({duration:1e3})),W("click",Z,()=>d("devil")),E(1,R,()=>ee,()=>({duration:1e3})),E(2,R,()=>ee,()=>({duration:500})),P(_,w)}),P(e,m),Ce()}var yi=T('<div class="modal-container user-consent svelte-rvnfg2"><div class="modal svelte-rvnfg2"><h1 class="svelte-rvnfg2"><span>Click</span> <span style="opacity: 0.5">anywhere</span> <span>to start</span> <span style="opacity: 0.5">the game</span></h1></div></div>'),wi=T("<!> <!> <!>",1),bi=T("<!> <!>",1);function Ei(e,r){Se(r,!1);const t=nr(),n=()=>D(j,"$GrinchsBar",t);Te();var a=bi();W("click",en.body,An(()=>j.consentOfUserGiven()));var i=$e(a);Na(i,{});var s=x(i,2);X(s,()=>!n().userConsentForSound,l=>{var c=yi();P(l,c)},l=>{var c=wi(),f=$e(c);Ja(f,{});var u=x(f,2);ni(u,{});var d=x(u,2);mi(d,{}),P(l,c)}),P(e,a),Ce()}Aa(Ei,{target:document.body});

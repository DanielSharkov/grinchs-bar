var Pn=Object.defineProperty;var br=e=>{throw TypeError(e)};var Tn=(e,t,r)=>t in e?Pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Er=(e,t,r)=>Tn(e,typeof t!="symbol"?t+"":t,r),Ar=(e,t,r)=>t.has(e)||br("Cannot "+r);var L=(e,t,r)=>(Ar(e,t,"read from private field"),r?r.call(e):t.get(e)),kt=(e,t,r)=>t.has(e)?br("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r);var xt=(e,t,r)=>(Ar(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();const In=!1;var Vr=Array.isArray,er=Array.from,zn=Object.defineProperty,$r=Object.getOwnPropertyDescriptor,Wr=Object.getOwnPropertyDescriptors,It=Object.getPrototypeOf;function Mn(e){return typeof e=="function"}const ae=()=>{};function Bn(e){return e()}function zt(e){for(var t=0;t<e.length;t++)e[t]()}const pe=2,Hr=4,Qe=8,yt=16,de=32,wt=64,Oe=128,dt=256,U=512,Ae=1024,Le=2048,le=4096,Xe=8192,jr=16384,bt=32768,Rn=1<<18,Ur=1<<19,Sr=Symbol("$state");function Kr(e){return e===this.v}function Yr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Jr(e){return!Yr(e,this.v)}function Gn(e){throw new Error("effect_in_teardown")}function Nn(){throw new Error("effect_in_unowned_derived")}function Dn(e){throw new Error("effect_orphan")}function qn(){throw new Error("effect_update_depth_exceeded")}function Ln(){throw new Error("state_unsafe_local_read")}function Fn(){throw new Error("state_unsafe_mutation")}let Et=!1;function Vn(){Et=!0}function vt(e){return{f:0,v:e,reactions:null,equals:Kr,version:0}}function tr(e,t=!1){var n;const r=vt(e);return t||(r.equals=Jr),Et&&I!==null&&I.l!==null&&((n=I.l).s??(n.s=[])).push(r),r}function rr(e,t=!1){return Wn(tr(e,t))}function Wn(e){return C!==null&&C.f&pe&&(ue===null?sa([e]):ue.push(e)),e}function et(e,t){return C!==null&&pr()&&C.f&(pe|yt)&&(ue===null||!ue.includes(e))&&Fn(),Mt(e,t)}function Mt(e,t){return e.equals(t)||(e.v=t,e.version=hn(),Zr(e,Ae),pr()&&$!==null&&$.f&U&&!($.f&de)&&(F!==null&&F.includes(e)?(ie($,Ae),St($)):be===null?oa([e]):be.push(e))),t}function Zr(e,t){var r=e.reactions;if(r!==null)for(var n=pr(),a=r.length,i=0;i<a;i++){var s=r[i],l=s.f;l&Ae||!n&&s===$||(ie(s,t),l&(U|Oe)&&(l&pe?Zr(s,Le):St(s)))}}const nr=1,ar=2,Qr=4,Hn=8,jn=16,Un=1,Kn=2,Yn=4,Jn=1,Zn=2;let Qn=!1;var Bt,Xr,en,tn;function Xn(){if(Bt===void 0){Bt=window,Xr=document;var e=Element.prototype,t=Node.prototype;en=$r(t,"firstChild").get,tn=$r(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function ir(e=""){return document.createTextNode(e)}function pt(e){return en.call(e)}function At(e){return tn.call(e)}function S(e,t){return pt(e)}function $e(e,t){{var r=pt(e);return r instanceof Comment&&r.data===""?At(r):r}}function x(e,t=1,r=!1){let n=e;for(;t--;)n=At(n);return n}function ea(e){e.textContent=""}function rn(e){var t=pe|Ae;$===null?t|=Oe:$.f|=Ur;const r={children:null,ctx:I,deps:null,equals:Kr,f:t,fn:e,reactions:null,v:null,version:0,parent:$};if(C!==null&&C.f&pe){var n=C;(n.children??(n.children=[])).push(r)}return r}function Cr(e){const t=rn(e);return t.equals=Jr,t}function nn(e){var t=e.children;if(t!==null){e.children=null;for(var r=0;r<t.length;r+=1){var n=t[r];n.f&pe?sr(n):Pe(n)}}}function an(e){var t,r=$;fe(e.parent);try{nn(e),t=gn(e)}finally{fe(r)}return t}function sn(e){var t=an(e),r=(Ne||e.f&Oe)&&e.deps!==null?Le:U;ie(e,r),e.equals(t)||(e.v=t,e.version=hn())}function sr(e){nn(e),Ye(e,0),ie(e,Xe),e.v=e.children=e.deps=e.ctx=e.reactions=null}function on(e){$===null&&C===null&&Dn(),C!==null&&C.f&Oe&&Nn(),vr&&Gn()}function ta(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Fe(e,t,r,n=!0){var a=(e&wt)!==0,i=$,s={ctx:I,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|Ae,first:null,fn:t,last:null,next:null,parent:a?null:i,prev:null,teardown:null,transitions:null,version:0};if(r){var l=De;try{xr(!0),tt(s),s.f|=jr}catch(u){throw Pe(s),u}finally{xr(l)}}else t!==null&&St(s);var c=r&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&Ur)===0;if(!c&&!a&&n&&(i!==null&&ta(s,i),C!==null&&C.f&pe)){var f=C;(f.children??(f.children=[])).push(s)}return s}function ln(e){const t=Fe(Qe,null,!1);return ie(t,U),t.teardown=e,t}function kr(e){on();var t=$!==null&&($.f&de)!==0&&I!==null&&!I.m;if(t){var r=I;(r.e??(r.e=[])).push({fn:e,effect:$,reaction:C})}else{var n=$t(e);return n}}function ra(e){return on(),ur(e)}function na(e){const t=Fe(wt,e,!0);return()=>{Pe(t)}}function $t(e){return Fe(Hr,e,!1)}function or(e,t){var r=I,n={effect:null,ran:!1};r.l.r1.push(n),n.effect=ur(()=>{e(),!n.ran&&(n.ran=!0,et(r.l.r2,!0),rt(t))})}function lr(){var e=I;ur(()=>{if(b(e.l.r2)){for(var t of e.l.r1){var r=t.effect;r.f&U&&ie(r,Le),Ve(r)&&tt(r),t.ran=!1}e.l.r2.v=!1}})}function ur(e){return Fe(Qe,e,!0)}function oe(e){return cr(e)}function cr(e,t=0){return Fe(Qe|yt|t,e,!0)}function Ke(e,t=!0){return Fe(Qe|de,e,!0,t)}function un(e){var t=e.teardown;if(t!==null){const r=vr,n=C;Or(!0),ce(null);try{t.call(null)}finally{Or(r),ce(n)}}}function cn(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var r=0;r<t.length;r+=1)sr(t[r])}}function fn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;Pe(r,t),r=n}}function aa(e){for(var t=e.first;t!==null;){var r=t.next;t.f&de||Pe(t),t=r}}function Pe(e,t=!0){var r=!1;if((t||e.f&Rn)&&e.nodes_start!==null){for(var n=e.nodes_start,a=e.nodes_end;n!==null;){var i=n===a?null:At(n);n.remove(),n=i}r=!0}fn(e,t&&!r),cn(e),Ye(e,0),ie(e,Xe);var s=e.transitions;if(s!==null)for(const c of s)c.stop();un(e);var l=e.parent;l!==null&&l.first!==null&&dn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.parent=e.fn=e.nodes_start=e.nodes_end=null}function dn(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Rt(e,t){var r=[];fr(e,r,!0),vn(r,()=>{Pe(e),t&&t()})}function vn(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var a of e)a.out(n)}else t()}function fr(e,t,r){if(!(e.f&le)){if(e.f^=le,e.transitions!==null)for(const s of e.transitions)(s.is_global||r)&&t.push(s);for(var n=e.first;n!==null;){var a=n.next,i=(n.f&bt)!==0||(n.f&de)!==0;fr(n,t,i?r:!1),n=a}}}function _t(e){pn(e,!0)}function pn(e,t){if(e.f&le){Ve(e)&&tt(e),e.f^=le;for(var r=e.first;r!==null;){var n=r.next,a=(r.f&bt)!==0||(r.f&de)!==0;pn(r,a?t:!1),r=n}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&i.in()}}let Gt=!1,Nt=[];function ia(){Gt=!1;const e=Nt.slice();Nt=[],zt(e)}function dr(e){Gt||(Gt=!0,queueMicrotask(ia)),Nt.push(e)}let ht=!1,De=!1,vr=!1;function xr(e){De=e}function Or(e){vr=e}let Dt=[],je=0;let C=null;function ce(e){C=e}let $=null;function fe(e){$=e}let ue=null;function sa(e){ue=e}let F=null,Q=0,be=null;function oa(e){be=e}let _n=0,Ne=!1,I=null;function hn(){return++_n}function pr(){return!Et||I!==null&&I.l===null}function Ve(e){var s,l;var t=e.f;if(t&Ae)return!0;if(t&Le){var r=e.deps,n=(t&Oe)!==0;if(r!==null){var a;if(t&dt){for(a=0;a<r.length;a++)((s=r[a]).reactions??(s.reactions=[])).push(e);e.f^=dt}for(a=0;a<r.length;a++){var i=r[a];if(Ve(i)&&sn(i),n&&$!==null&&!Ne&&!((l=i==null?void 0:i.reactions)!=null&&l.includes(e))&&(i.reactions??(i.reactions=[])).push(e),i.version>e.version)return!0}}n||ie(e,U)}return!1}function la(e,t,r){throw e}function gn(e){var o;var t=F,r=Q,n=be,a=C,i=Ne,s=ue,l=I,c=e.f;F=null,Q=0,be=null,C=c&(de|wt)?null:e,Ne=!De&&(c&Oe)!==0,ue=null,I=e.ctx;try{var f=(0,e.fn)(),u=e.deps;if(F!==null){var d;if(Ye(e,Q),u!==null&&Q>0)for(u.length=Q+F.length,d=0;d<F.length;d++)u[Q+d]=F[d];else e.deps=u=F;if(!Ne)for(d=Q;d<u.length;d++)((o=u[d]).reactions??(o.reactions=[])).push(e)}else u!==null&&Q<u.length&&(Ye(e,Q),u.length=Q);return f}finally{F=t,Q=r,be=n,C=a,Ne=i,ue=s,I=l}}function ua(e,t){let r=t.reactions;if(r!==null){var n=r.indexOf(e);if(n!==-1){var a=r.length-1;a===0?r=t.reactions=null:(r[n]=r[a],r.pop())}}r===null&&t.f&pe&&(F===null||!F.includes(t))&&(ie(t,Le),t.f&(Oe|dt)||(t.f^=dt),Ye(t,0))}function Ye(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)ua(e,r[n])}function tt(e){var t=e.f;if(!(t&Xe)){ie(e,U);var r=$;$=e;try{t&yt?aa(e):fn(e),cn(e),un(e);var n=gn(e);e.teardown=typeof n=="function"?n:null,e.version=_n}catch(a){la(a)}finally{$=r}}}function ca(){je>1e3&&(je=0,qn()),je++}function fa(e){var t=e.length;if(t!==0){ca();var r=De;De=!0;try{for(var n=0;n<t;n++){var a=e[n];a.f&U||(a.f^=U);var i=[];mn(a,i),da(i)}}finally{De=r}}}function da(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];!(n.f&(Xe|le))&&Ve(n)&&(tt(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?dn(n):n.fn=null))}}function va(){if(ht=!1,je>1001)return;const e=Dt;Dt=[],fa(e),ht||(je=0)}function St(e){ht||(ht=!0,queueMicrotask(va));for(var t=e;t.parent!==null;){t=t.parent;var r=t.f;if(r&(wt|de)){if(!(r&U))return;t.f^=U}}Dt.push(t)}function mn(e,t){var r=e.first,n=[];e:for(;r!==null;){var a=r.f,i=(a&de)!==0,s=i&&(a&U)!==0;if(!s&&!(a&le))if(a&Qe){i?r.f^=U:Ve(r)&&tt(r);var l=r.first;if(l!==null){r=l;continue}}else a&Hr&&n.push(r);var c=r.next;if(c===null){let d=r.parent;for(;d!==null;){if(e===d)break e;var f=d.next;if(f!==null){r=f;continue e}d=d.parent}}r=c}for(var u=0;u<n.length;u++)l=n[u],t.push(l),mn(l,t)}function b(e){var l;var t=e.f,r=(t&pe)!==0;if(r&&t&Xe){var n=an(e);return sr(e),n}if(C!==null){ue!==null&&ue.includes(e)&&Ln();var a=C.deps;F===null&&a!==null&&a[Q]===e?Q++:F===null?F=[e]:F.push(e),be!==null&&$!==null&&$.f&U&&!($.f&de)&&be.includes(e)&&(ie($,Ae),St($))}else if(r&&e.deps===null){var i=e,s=i.parent;s!==null&&!((l=s.deriveds)!=null&&l.includes(i))&&(s.deriveds??(s.deriveds=[])).push(i)}return r&&(i=e,Ve(i)&&sn(i)),e.v}function rt(e){const t=C;try{return C=null,e()}finally{C=t}}const pa=~(Ae|Le|U);function ie(e,t){e.f=e.f&pa|t}function Se(e,t=!1,r){I={p:I,c:null,e:null,m:!1,s:e,x:null,l:null},Et&&!t&&(I.l={s:null,u:null,r1:[],r2:vt(!1)})}function Ce(e){const t=I;if(t!==null){const s=t.e;if(s!==null){var r=$,n=C;t.e=null;try{for(var a=0;a<s.length;a++){var i=s[a];fe(i.effect),ce(i.reaction),$t(i.fn)}}finally{fe(r),ce(n)}}I=t.p,t.m=!0}return{}}function _a(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Sr in e)qt(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&Sr in r&&qt(r)}}}function qt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{qt(e[n],t)}catch{}const r=It(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Wr(r);for(let a in n){const i=n[a].get;if(i)try{i.call(e)}catch{}}}}}function ha(e){var t=C,r=$;ce(null),fe(null);try{return e()}finally{ce(t),fe(r)}}const ga=new Set,Pr=new Set;function ma(e,t,r,n){function a(i){if(n.capture||We.call(t,i),!i.cancelBubble)return ha(()=>r.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?dr(()=>{t.addEventListener(e,a,n)}):t.addEventListener(e,a,n),a}function W(e,t,r,n,a){var i={capture:n,passive:a},s=ma(e,t,r,i);(t===document.body||t===window||t===document)&&ln(()=>{t.removeEventListener(e,s,i)})}function We(e){var h;var t=this,r=t.ownerDocument,n=e.type,a=((h=e.composedPath)==null?void 0:h.call(e))||[],i=a[0]||e.target,s=0,l=e.__root;if(l){var c=a.indexOf(l);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var f=a.indexOf(t);if(f===-1)return;c<=f&&(s=c)}if(i=a[s]||e.target,i!==t){zn(e,"currentTarget",{configurable:!0,get(){return i||r}});var u=C,d=$;ce(null),fe(null);try{for(var o,p=[];i!==null;){var v=i.assignedSlot||i.parentNode||i.host||null;try{var y=i["__"+n];if(y!==void 0&&!i.disabled)if(Vr(y)){var[g,...m]=y;g.apply(i,[e,...m])}else y.call(i,e)}catch(A){o?p.push(A):o=A}if(e.cancelBubble||v===t||v===null)break;i=v}if(o){for(let A of p)queueMicrotask(()=>{throw A});throw o}}finally{e.__root=t,delete e.currentTarget,ce(u),fe(d)}}}function ya(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Lt(e,t){var r=$;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function T(e,t){var r=(t&Jn)!==0,n=(t&Zn)!==0,a,i=!e.startsWith("<!>");return()=>{a===void 0&&(a=ya(i?e:"<!>"+e),r||(a=pt(a)));var s=n?document.importNode(a,!0):a.cloneNode(!0);if(r){var l=pt(s),c=s.lastChild;Lt(l,c)}else Lt(s,s);return s}}function _r(){var e=document.createDocumentFragment(),t=document.createComment(""),r=ir();return e.append(t,r),Lt(t,r),e}function O(e,t){e!==null&&e.before(t)}const wa=["touchstart","touchmove"];function ba(e){return wa.includes(e)}let Ft=!0;function Vt(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r==null?"":r+"")}function Ea(e,t){return Aa(e,t)}const Re=new Map;function Aa(e,{target:t,anchor:r,props:n={},events:a,context:i,intro:s=!0}){Xn();var l=new Set,c=d=>{for(var o=0;o<d.length;o++){var p=d[o];if(!l.has(p)){l.add(p);var v=ba(p);t.addEventListener(p,We,{passive:v});var y=Re.get(p);y===void 0?(document.addEventListener(p,We,{passive:v}),Re.set(p,1)):Re.set(p,y+1)}}};c(er(ga)),Pr.add(c);var f=void 0,u=na(()=>{var d=r??t.appendChild(ir());return Ke(()=>{if(i){Se({});var o=I;o.c=i}a&&(n.$$events=a),Ft=s,f=e(d,n)||{},Ft=!0,i&&Ce()}),()=>{var v;for(var o of l){t.removeEventListener(o,We);var p=Re.get(o);--p===0?(document.removeEventListener(o,We),Re.delete(o)):Re.set(o,p)}Pr.delete(c),Tr.delete(f),d!==r&&((v=d.parentNode)==null||v.removeChild(d))}});return Tr.set(f,u),f}let Tr=new WeakMap;function X(e,t,r,n=null,a=!1){var i=e,s=null,l=null,c=null,f=a?bt:0;cr(()=>{c!==(c=!!t())&&(c?(s?_t(s):s=Ke(()=>r(i)),l&&Rt(l,()=>{l=null})):(l?_t(l):n&&(l=Ke(()=>n(i))),s&&Rt(s,()=>{s=null})))},f)}let ct=null;function gt(e,t){return t}function $a(e,t,r,n){for(var a=[],i=t.length,s=0;s<i;s++)fr(t[s].e,a,!0);var l=i>0&&a.length===0&&r!==null;if(l){var c=r.parentNode;ea(c),c.append(r),n.clear(),me(e,t[0].prev,t[i-1].next)}vn(a,()=>{for(var f=0;f<i;f++){var u=t[f];l||(n.delete(u.k),me(e,u.prev,u.next)),Pe(u.e,!l)}})}function qe(e,t,r,n,a,i=null){var s=e,l={flags:t,items:new Map,first:null},c=(t&Qr)!==0;if(c){var f=e;s=f.appendChild(ir())}var u=null,d=!1;cr(()=>{var o=r(),p=Vr(o)?o:o==null?[]:er(o),v=p.length;if(!(d&&v===0)){d=v===0;{var y=C;Sa(p,l,s,a,t,(y.f&le)!==0,n)}i!==null&&(v===0?u?_t(u):u=Ke(()=>i(s)):u!==null&&Rt(u,()=>{u=null})),r()}})}function Sa(e,t,r,n,a,i,s){var _e,at,it,te;var l=(a&Hn)!==0,c=(a&(nr|ar))!==0,f=e.length,u=t.items,d=t.first,o=d,p,v=null,y,g=[],m=[],h,A,_,w;if(l)for(w=0;w<f;w+=1)h=e[w],A=s(h,w),_=u.get(A),_!==void 0&&((_e=_.a)==null||_e.measure(),(y??(y=new Set)).add(_));for(w=0;w<f;w+=1){if(h=e[w],A=s(h,w),_=u.get(A),_===void 0){var R=o?o.e.nodes_start:r;v=ka(R,t,v,v===null?t.first:v.next,h,A,w,n,a),u.set(A,v),g=[],m=[],o=v.next;continue}if(c&&Ca(_,h,w,a),_.e.f&le&&(_t(_.e),l&&((at=_.a)==null||at.unfix(),(y??(y=new Set)).delete(_))),_!==o){if(p!==void 0&&p.has(_)){if(g.length<m.length){var z=m[0],k;v=z.prev;var Y=g[0],J=g[g.length-1];for(k=0;k<g.length;k+=1)Ir(g[k],z,r);for(k=0;k<m.length;k+=1)p.delete(m[k]);me(t,Y.prev,J.next),me(t,v,Y),me(t,J,z),o=z,v=J,w-=1,g=[],m=[]}else p.delete(_),Ir(_,o,r),me(t,_.prev,_.next),me(t,_,v===null?t.first:v.next),me(t,v,_),v=_;continue}for(g=[],m=[];o!==null&&o.k!==A;)(i||!(o.e.f&le))&&(p??(p=new Set)).add(o),m.push(o),o=o.next;if(o===null)continue;_=o}g.push(_),v=_,o=_.next}if(o!==null||p!==void 0){for(var q=p===void 0?[]:er(p);o!==null;)(i||!(o.e.f&le))&&q.push(o),o=o.next;var M=q.length;if(M>0){var Z=a&Qr&&f===0?r:null;if(l){for(w=0;w<M;w+=1)(it=q[w].a)==null||it.measure();for(w=0;w<M;w+=1)(te=q[w].a)==null||te.fix()}$a(t,q,Z,u)}}l&&dr(()=>{var P;if(y!==void 0)for(_ of y)(P=_.a)==null||P.apply()}),$.first=t.first&&t.first.e,$.last=v&&v.e}function Ca(e,t,r,n){n&nr&&Mt(e.v,t),n&ar?Mt(e.i,r):e.i=r}function ka(e,t,r,n,a,i,s,l,c){var f=ct,u=(c&nr)!==0,d=(c&jn)===0,o=u?d?tr(a):vt(a):a,p=c&ar?vt(s):s,v={i:p,v:o,k:i,a:null,e:null,prev:r,next:n};ct=v;try{return v.e=Ke(()=>l(e,o,p),Qn),v.e.prev=r&&r.e,v.e.next=n&&n.e,r===null?t.first=v:(r.next=v,r.e.next=v.e),n!==null&&(n.prev=v,n.e.prev=v.e),v}finally{ct=f}}function Ir(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,a=t?t.e.nodes_start:r,i=e.e.nodes_start;i!==n;){var s=At(i);a.before(i),i=s}}function me(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function xa(e,t,r){$t(()=>{var n=rt(()=>t(e,r==null?void 0:r())||{});if(n!=null&&n.destroy)return()=>n.destroy()})}function Oa(e,t){var r=e.__attributes??(e.__attributes={});r.value===(r.value=t)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t)}function yn(e,t,r,n){var a=e.__attributes??(e.__attributes={});a[t]!==(a[t]=r)&&("__styles"in e&&(e.__styles={}),r==null?e.removeAttribute(t):typeof r!="string"&&Pa(e).includes(t)?e[t]=r:e.setAttribute(t,r))}var zr=new Map;function Pa(e){var t=zr.get(e.nodeName);if(t)return t;zr.set(e.nodeName,t=[]);for(var r,n=It(e),a=Element.prototype;a!==n;){r=Wr(n);for(var i in r)r[i].set&&t.push(i);n=It(n)}return t}function ne(e,t,r){if(r){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function ye(e,t,r,n){var a=e.__styles??(e.__styles={});a[t]!==r&&(a[t]=r,r==null?e.style.removeProperty(t):e.style.setProperty(t,r,""))}const Ta=()=>performance.now(),we={tick:e=>requestAnimationFrame(e),now:()=>Ta(),tasks:new Set};function wn(e){we.tasks.forEach(t=>{t.c(e)||(we.tasks.delete(t),t.f())}),we.tasks.size!==0&&we.tick(wn)}function Ia(e){let t;return we.tasks.size===0&&we.tick(wn),{promise:new Promise(r=>{we.tasks.add(t={c:e,f:r})}),abort(){we.tasks.delete(t)}}}function ut(e,t){e.dispatchEvent(new CustomEvent(t))}function za(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Mr(e){const t={},r=e.split(";");for(const n of r){const[a,i]=n.split(":");if(!a||i===void 0)break;const s=za(a.trim());t[s]=i.trim()}return t}const Ma=e=>e;function bn(e,t,r){var n=ct,a,i,s,l=null;n.a??(n.a={element:e,measure(){a=this.element.getBoundingClientRect()},apply(){if(s==null||s.abort(),i=this.element.getBoundingClientRect(),a.left!==i.left||a.right!==i.right||a.top!==i.top||a.bottom!==i.bottom){const c=t()(this.element,{from:a,to:i},r==null?void 0:r());s=mt(this.element,c,void 0,1,()=>{s==null||s.abort(),s=void 0})}},fix(){if(!e.getAnimations().length){var{position:c,width:f,height:u}=getComputedStyle(e);if(c!=="absolute"&&c!=="fixed"){var d=e.style;l={position:d.position,width:d.width,height:d.height,transform:d.transform},d.position="absolute",d.width=f,d.height=u;var o=e.getBoundingClientRect();if(a.left!==o.left||a.top!==o.top){var p=`translate(${a.left-o.left}px, ${a.top-o.top}px)`;d.transform=d.transform?`${d.transform} ${p}`:p}}}},unfix(){if(l){var c=e.style;c.position=l.position,c.width=l.width,c.height=l.height,c.transform=l.transform}}}),n.a.element=e}function E(e,t,r,n){var a=(e&Un)!==0,i=(e&Kn)!==0,s=a&&i,l=(e&Yn)!==0,c=s?"both":a?"in":"out",f,u=t.inert,d,o;function p(){var h=C,A=$;ce(null),fe(null);try{return f??(f=r()(t,(n==null?void 0:n())??{},{direction:c}))}finally{ce(h),fe(A)}}var v={is_global:l,in(){var h;if(t.inert=u,!a){o==null||o.abort(),(h=o==null?void 0:o.reset)==null||h.call(o);return}i||d==null||d.abort(),ut(t,"introstart"),d=mt(t,p(),o,1,()=>{ut(t,"introend"),d==null||d.abort(),d=f=void 0})},out(h){if(!i){h==null||h(),f=void 0;return}t.inert=!0,ut(t,"outrostart"),o=mt(t,p(),d,0,()=>{ut(t,"outroend"),h==null||h()})},stop:()=>{d==null||d.abort(),o==null||o.abort()}},y=$;if((y.transitions??(y.transitions=[])).push(v),a&&Ft){var g=l;if(!g){for(var m=y.parent;m&&m.f&bt;)for(;(m=m.parent)&&!(m.f&yt););g=!m||(m.f&jr)!==0}g&&$t(()=>{rt(()=>v.in())})}}function mt(e,t,r,n,a){var i=n===1;if(Mn(t)){var s,l=!1;return dr(()=>{if(!l){var g=t({direction:i?"in":"out"});s=mt(e,g,r,n,a)}}),{abort:()=>{l=!0,s==null||s.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(r==null||r.deactivate(),!(t!=null&&t.duration))return a(),{abort:ae,deactivate:ae,reset:ae,t:()=>n};const{delay:c=0,css:f,tick:u,easing:d=Ma}=t;var o=[];if(i&&r===void 0&&(u&&u(0,1),f)){var p=Mr(f(0,1));o.push(p,p)}var v=()=>1-n,y=e.animate(o,{duration:c});return y.onfinish=()=>{var g=(r==null?void 0:r.t())??1-n;r==null||r.abort();var m=n-g,h=t.duration*Math.abs(m),A=[];if(h>0){if(f)for(var _=Math.ceil(h/16.666666666666668),w=0;w<=_;w+=1){var R=g+m*d(w/_),z=f(R,1-R);A.push(Mr(z))}v=()=>{var k=y.currentTime;return g+m*d(k/h)},u&&Ia(()=>{if(y.playState!=="running")return!1;var k=v();return u(k,1-k),!0})}y=e.animate(A,{duration:h,fill:"forwards"}),y.onfinish=()=>{v=()=>n,u==null||u(n,1-n),a()}},{abort:()=>{y&&(y.cancel(),y.effect=null,y.onfinish=ae)},deactivate:()=>{a=ae},reset:()=>{n===0&&(u==null||u(1,0))},t:()=>v()}}function En(e){var t=!1;return function(...r){if(!t)return t=!0,e==null?void 0:e.apply(this,r)}}function Te(e=!1){const t=I,r=t.l.u;if(!r)return;let n=()=>_a(t.s);if(e){let a=0,i={};const s=rn(()=>{let l=!1;const c=t.s;for(const f in c)c[f]!==i[f]&&(i[f]=c[f],l=!0);return l&&a++,a});n=()=>b(s)}r.b.length&&ra(()=>{Br(t,n),zt(r.b)}),kr(()=>{const a=rt(()=>r.m.map(Bn));return()=>{for(const i of a)typeof i=="function"&&i()}}),r.a.length&&kr(()=>{Br(t,n),zt(r.a)})}function Br(e,t){if(e.l.s)for(const r of e.l.s)b(r);t()}function An(e,t,r){if(e==null)return t(void 0),ae;const n=rt(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}function D(e,t,r){const n=r[t]??(r[t]={store:null,source:tr(void 0),unsubscribe:ae});if(n.store!==e)if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=ae;else{var a=!0;n.unsubscribe=An(e,i=>{a?n.source.v=i:et(n.source,i)}),a=!1}return b(n.source)}function nt(){const e={};return ln(()=>{for(var t in e)e[t].unsubscribe()}),e}const Ba="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ba);Vn();let Je,Ot;const $n={gunShot:"/sound/gun_shot.mp3",playerDead:"/sound/player_game_over.mp3",revolverClear:"/sound/revolver_clear.mp3",revolverSpin:"/sound/revolver_spin.mp3",liar:"/sound/liar.mp3",gong:"/sound/gong.mp3",cardsFlip:"/sound/cards_flip.mp3",whoosh:"/sound/whoosh.mp3",deepWhoosh:"/sound/deep_whoosh.mp3",cardSpinWhoosh:"/sound/card_spin_whoosh.mp3",singleCardFlip:"/sound/single_card_flip.mp3"};function Ee(e){const t=new Audio($n[e]);Je.createMediaElementSource(t).connect(Je.destination),t.play().then(()=>t.remove())}const Ue={gameStart:new Audio("/music/game_start.mp3"),gameEnd:new Audio("/music/game_end.mp3"),intro:new Audio("/music/intro.mp3")};function Wt(e,t){return Ue[e].currentTime=0,Ue[e].volume=1,Ue[e].play()}async function Ra(e,t){const r=Ue[e];return new Promise(n=>{const i=r.volume/(t/50);let s=0;const l=setInterval(()=>{s+=50,r.volume>0&&s<t?r.volume=Math.max(0,r.volume-i):(clearInterval(l),r.pause(),n())},50)})}function Ga(e,t){Se(t,!1),Te(),W("click",Bt,En(()=>{Je=new(window.AudioContext||window.webkitAudioContext),Ot=new(window.AudioContext||window.webkitAudioContext),Object.values(Ue).forEach(r=>{Ot.createMediaElementSource(r).connect(Ot.destination)})})),Ce()}var se=(e=>(e[e.Preperation=0]="Preperation",e[e.InProcess=1]="InProcess",e[e.GameEnded=2]="GameEnded",e))(se||{}),N=(e=>(e.Ace="Ace",e.King="King",e.Queen="Queen",e.Jack="Jack",e.Joker="Joker",e.Devil="Devil",e))(N||{});const Ge=[];function V(e,t=ae){let r=null;const n=new Set;function a(l){if(Yr(e,l)&&(e=l,r)){const c=!Ge.length;for(const f of n)f[1](),Ge.push(f,e);if(c){for(let f=0;f<Ge.length;f+=2)Ge[f][0](Ge[f+1]);Ge.length=0}}}function i(l){a(l(e))}function s(l,c=ae){const f=[l,c];return n.add(f),n.size===1&&(r=t(a,i)||ae),l(e),()=>{n.delete(f),n.size===0&&r&&(r(),r=null)}}return{set:a,update:i,subscribe:s}}function hr(e){let t;return An(e,r=>t=r)(),t}function B(e){return new Promise(t=>setTimeout(t,e*1e3))}function xe(e=1,t=0){if(t>e)throw new Error("Min should be less than or equal to Max.");const r=crypto.getRandomValues(new Uint32Array(1))[0];return t+r%(e-t+1)}const Na=e=>e;function ee(e,{delay:t=0,duration:r=400,easing:n=Na}={}){const a=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:n,css:i=>`opacity: ${i*a}`}}function H(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function gr(e){const t=e-1;return t*t*t+1}function Da(e){return Math.sin(-13*(e+1)*Math.PI/2)*Math.pow(2,-10*e)+1}function qa(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}function La(e){return--e*e*e*e*e+1}function Fa(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)}function Va(e){return 2.70158*e*e*e-1.70158*e*e}function ve(e,t){return{delay:t==null?void 0:t.delay,duration:(t==null?void 0:t.duration)??300,easing:(t==null?void 0:t.easing)??H,css:r=>`opacity: ${r}; transform: scale(${r});`}}function Rr(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}async function Gr(e,t,r){if(hr(ft)||t.length<1)return;ft.set(!0),Ee(e==="liar"?"liar":"gong"),e==="liar"?(jt.set(!0),await B(3)):(Ee("cardSpinWhoosh"),Ut.set(!0),await B(4),Ut.set(!1),await B(1)),Kt.set(!0),await Ee("revolverSpin"),r===!0?await B(2.4):await B(5);const n=t.map(([a,i])=>{const s=new Audio($n[a?"gunShot":"revolverClear"]);return Je.createMediaElementSource(s).connect(Je.destination),[a,i,()=>s.play().then(()=>s.remove())]});for(const[a,i,s]of n)i(),a&&(Ht.set(!0),Ht.set(!1)),s(),await B(.5);Kt.set(!1),ft.set(!1)}function Wa(e){e.style.visibility="hidden",Ht.subscribe(t=>{t&&(e.style.visibility="unset",setTimeout(()=>{e.style.visibility="hidden"},50))})}const Ht=V(!1),ft=V(!1),jt=V(!1),Ut=V(!1),Kt=V(!1);var Ha=T('<div id="LiarHand" class="action-container svelte-154svea"><div class="liar-hand-wrapper svelte-154svea"><img src="/liar_hand.png" alt="Liar!" class="svelte-154svea"></div></div>'),ja=T(`<div id="DevilCardTriggered" class="action-container svelte-154svea"><div class="devil-card-wrapper svelte-154svea"><div class="playing-card svelte-154svea"><div class="front svelte-154svea" style="background-image: url('/playing_card/Devil.png')"></div> <div class="back svelte-154svea" style="background-image: url('/playing_card/back.png')"></div></div></div></div>`),Ua=T('<div id="RevolverChamber" class="action-container svelte-154svea"><div class="img-wrapper svelte-154svea"><img src="/revolver_chamber.png" alt="banner" class="svelte-154svea"></div> <div class="flash svelte-154svea"></div></div>'),Ka=T('<div id="RevolverActions" class="svelte-154svea"><!> <!> <!></div>');function Ya(e,t){Se(t,!1);const r=nt(),n=()=>D(ft,"$revolverActionVisible",r),a=()=>D(jt,"$liarHandVisible",r),i=()=>D(Ut,"$devilCardVisible",r),s=()=>D(Kt,"$revolverChamberVisible",r);function l(d){return{duration:400,easing:Rr,css:o=>`opacity: ${o}; transform: scale(${o});`}}function c(d){return{duration:2e3,css:o=>{const p=Rr(o);return`opacity: ${o}; transform: translateY(${20-20*p}rem) scale(${p});`}}}Te();var f=_r(),u=$e(f);X(u,n,d=>{var o=Ka(),p=S(o);X(p,a,g=>{var m=Ha(),h=S(m);E(5,h,()=>l),E(6,h,()=>ee,()=>({duration:500})),W("introend",h,()=>setTimeout(()=>jt.set(!1),1500)),O(g,m)});var v=x(p,2);X(v,i,g=>{var m=ja(),h=S(m);E(5,h,()=>c),E(6,h,()=>ee,()=>({easing:H,duration:500})),O(g,m)});var y=x(v,2);X(y,s,g=>{var m=Ua(),h=S(m),A=x(h,2);xa(A,_=>Wa(_)),E(5,h,()=>ve,()=>({duration:500})),O(g,m)}),E(5,o,()=>ee,()=>({duration:500})),E(6,o,()=>ee,()=>({easing:H,duration:200})),O(d,o)}),O(e,f),Ce()}var Ja=T('<div class="playing-card svelte-1torxv3"><div class="front svelte-1torxv3"></div></div>'),Za=T('<div class="start-screen-background svelte-1torxv3"></div>');function Qa(e,t){Se(t,!1);const r=Array.from({length:40},(i,s)=>{let l=null;if(Math.random()>.2){const d=xe(Object.keys(N).length);l=Object.values(N)[d]}const c=Math.random()*96+2,f=Math.random()*96+2,u=xe(90);return{card:l,x:c,y:f,rotate:u}});function n(i,{rotate:s,cardIndex:l}){const c=xe(4,2),f=c*3;return{easing:gr,delay:15*l,duration:400+c*xe(200),css:u=>`transform: rotate(${s*u}deg) scale(${c-(c-1)*u});filter: blur(${f-f*u}px);opacity: ${u};`}}Te();var a=Za();qe(a,5,()=>r,gt,(i,s,l)=>{let c=()=>b(s).card,f=()=>b(s).x,u=()=>b(s).y,d=()=>b(s).rotate;var o=Ja(),p=S(o);oe(()=>{ye(o,"left",`${f()??""}%`),ye(o,"top",`${u()??""}%`),ye(o,"transform",`rotate(${d()??""}deg)`),ye(p,"background-image",`url('/playing_card/${(c()||"back")??""}.png')`)}),E(5,o,()=>n,()=>({rotate:d(),cardIndex:l})),O(i,o)}),E(6,a,()=>ee,()=>({easing:H,duration:1e3})),O(e,a),Ce()}function Sn(e,{from:t,to:r},n={}){var a=getComputedStyle(e),i=Xa(e),s=a.transform==="none"?"":a.transform,[l,c]=a.transformOrigin.split(" ").map(parseFloat),f=t.width/r.width,u=t.height/r.height,d=(t.left+f*l-(r.left+l))/i,o=(t.top+u*c-(r.top+c))/i,{delay:p=0,duration:v=g=>Math.sqrt(g)*120,easing:y=gr}=n;return{delay:p,duration:typeof v=="function"?v(Math.sqrt(d*d+o*o)):v,easing:y,css:(g,m)=>{var h=m*d,A=m*o,_=g+m*f,w=g+m*u;return`transform: ${s} scale(${_}, ${w}) translate(${h}px, ${A}px);`}}}function Xa(e){if("currentCSSZoom"in e)return e.currentCSSZoom;for(var t=e,r=1;t!==null;)r*=+getComputedStyle(t).zoom,t=t.parentElement;return r}function Nr(){Wt("intro"),mr.set(!0)}async function Dr(){mr.set(!1),await Ra("intro",2e3)}const mr=V(!1);var ei=T('<div class="entry svelte-zazxg8"><input type="text" class="svelte-zazxg8"> <button class="remove-player button-3d red small no-underline svelte-zazxg8">❌</button></div>'),ti=T(`<!> <div class="modal-container svelte-zazxg8"><div class="players-overview svelte-zazxg8"><div class="header svelte-zazxg8"><div id="GameLogo" class="svelte-zazxg8"><h1 class="svelte-zazxg8">Grinch's Bar</h1> <img src="/banner.png" alt="banner" class="svelte-zazxg8"></div></div> <div class="players-list svelte-zazxg8"><!> <div class="add-player entry svelte-zazxg8"><button class=" button-3d svelte-zazxg8">+ Add Player</button></div></div> <div class="actions svelte-zazxg8"><button class="start-game button-3d solid-green svelte-zazxg8">Start Game</button></div></div></div>`,1);function ri(e,t){Se(t,!1);const r=nt(),n=()=>D(j,"$GrinchsBar",r),a=()=>D(mr,"$preparationMenuVisible",r),i=rr();function s(o){return{delay:500,duration:2e3,easing:gr,css:p=>`opacity: ${p}; transform: scale(${2-1*p}); filter: blur(${10-10*p}px);`}}function l(o){return{duration:1500,easing:H,css:p=>`opacity: ${p}; transform: scale(${.85+.15*p});`}}function c(o){const p=o.clientHeight;return{duration:200,easing:H,css:v=>`opacity: ${v}; overflow: hidden; height: ${p*v}px; margin-top: ${1*v}rem;`}}function f(o){return{duration:1500,easing:H,css:p=>`opacity: ${p}; transform: translateY(-${8-8*p}rem) scale(${2-1*p});`}}or(()=>n(),()=>{et(i,n().players.length<2||n().players.some(o=>!o.name))}),lr(),Te();var u=_r(),d=$e(u);X(d,a,o=>{var p=ti(),v=$e(p);Qa(v,{});var y=x(v,2),g=S(y),m=S(g),h=x(m,2),A=S(h);qe(A,11,()=>n().players,k=>k.name,(k,Y,J)=>{var q=ei(),M=S(q),Z=x(M,2);oe(()=>Oa(M,b(Y).name)),W("change",M,_e=>j.updatePlayerName(b(J),_e.currentTarget.value)),W("click",Z,()=>j.removePlayer(b(J))),bn(q,()=>Sn,()=>({easing:H})),E(3,q,()=>c),O(k,q)});var _=x(A,2),w=S(_),R=x(h,2),z=S(R);oe(()=>z.disabled=b(i)),E(5,m,()=>f),W("click",w,()=>j.addPlayer()),W("click",z,()=>j.startGame()),E(5,g,()=>s),E(2,g,()=>l),O(o,p)}),O(e,u),Ce()}const He=V([]);async function qr(){He.set(Object.keys(j.$().cardsInGame).map(()=>[!0,!1])),Yt.set(!0),await B(1),Ee("whoosh"),await B(2),Ee("cardsFlip");const e=hr(He).length;for(let t=0;t<e;(t+=1)-1)He.update(r=>(r[t][0]=!1,r)),await B(.1);await B(1);for(let t=0;t<e;(t+=1)-1)He.update(r=>(r[t][1]=!0,r)),await B(.1);await new Promise(t=>{Jt.set(()=>t())}),Jt.set(null),Ee("deepWhoosh"),Yt.set(!1),await B(.1)}const Yt=V(!1),Jt=V(null);var ni=T('<span class="playing-card-count svelte-2dy7mq"> </span>'),ai=T(`<div class="card-slot svelte-2dy7mq"><div class="playing-card svelte-2dy7mq"><div class="front svelte-2dy7mq"></div> <div class="back svelte-2dy7mq" style="background-image: url('/playing_card/back.png')"></div> <!></div></div>`),ii=T('<div id="PlayingCardsInGame" class="svelte-2dy7mq"><div class="cards-container svelte-2dy7mq"></div> <button class="players-ready button-3d svelte-2dy7mq">Continue</button></div>');function si(e,t){Se(t,!1);const r=nt(),n=()=>D(j,"$GrinchsBar",r),a=()=>D(Jt,"$playersAreReadyPromiseResolver",r),i=()=>D(Yt,"$showPlayingCardsInGame",r),s=()=>D(He,"$cardsState",r),l=rr();function c(v){const g=v.offsetParent.offsetWidth/2-v.offsetWidth/2,m=v.parentElement;m.style.width=v.offsetWidth+"px",m.style.height=v.offsetHeight+"px";const h=2500,A=1e3,_=h-A,w=A/h;return{duration:h,css:R=>{if(R<w)return`position: absolute; left: ${g}px;`;const z=qa((h*R-A)/_);return`position: absolute;left: ${g+(v.offsetLeft-g)*z}px;`}}}function f(v,{cardIndex:y}){return{easing:Va,delay:30*y,duration:500,css:g=>`opacity: ${g}; transform: scale(${.75+.25*g})`}}function u(v){return{duration:2e3,easing:La,css:y=>`transform: scale(${1.5-.5*y});`}}function d(){a()!==null&&a()()}or(()=>n(),()=>{et(l,Object.keys(n().cardsInGame).length)}),lr(),Te();var o=_r(),p=$e(o);X(p,i,v=>{var y=ii(),g=S(y);qe(g,5,()=>Object.entries(n().cardsInGame),gt,(h,A,_)=>{let w=()=>b(A)[0],R=()=>b(A)[1];var z=ai(),k=S(z),Y=S(k),J=x(Y,4);X(J,()=>s()[_][1],q=>{var M=ni(),Z=S(M);oe(()=>Vt(Z,R())),E(5,M,()=>ve,()=>({duration:1e3,easing:Fa})),O(q,M)}),oe(()=>{ne(k,"flipped",s()[_][0]),ye(k,"z-index",b(l)-_),yn(Y,"style",`background-image: url('/playing_card/${w()??""}.png')`)}),E(5,k,()=>c),E(6,k,()=>f,()=>({cardIndex:_})),O(h,z)});var m=x(g,2);E(5,g,()=>u),W("click",m,d),E(1,m,()=>ve,()=>({delay:6e3,duration:1e3})),E(2,m,()=>ve,()=>({duration:500})),E(1,y,()=>ee,()=>({duration:1e3})),E(2,y,()=>ee,()=>({easing:H,delay:550,duration:200})),O(v,y)}),O(e,o),Ce()}var G,Ze,Zt;class oi{constructor(){kt(this,Ze);kt(this,G,V({userConsentForSound:!1,gameState:se.Preperation,players:[{name:"Me, myself & I",loadedBulletInSlot:0,triggers:-1}],winner:-1,cardsInGame:{[N.King]:8,[N.Queen]:8,[N.Jack]:8,[N.Ace]:8,[N.Joker]:2,[N.Devil]:2},cardOfTheRound:N.King}));Er(this,"subscribe",L(this,G).subscribe)}$(){return hr(this)}consentOfUserGiven(){if(this.$().userConsentForSound)return;L(this,G).update(r=>(r.userConsentForSound=!0,r)),Nr();const t={presentPlayingCardsInGame:()=>{qr()},quickGameStart:async()=>{const r=this.$();r.gameState===se.Preperation&&(r.players.length<2||r.players.some(n=>!n.name)||(L(this,G).update(n=>(n.winner=-1,n.gameState=se.InProcess,n.players.forEach((a,i)=>{n.players[i].triggers=-1,n.players[i].loadedBulletInSlot=0}),n)),await Dr(),Lr(),Pt(this.$().cardOfTheRound)))},updateCardOfRound:()=>{xt(this,Ze,Zt).call(this)},exitGame:()=>{this.exitGame()},updateRevolverChamber:()=>{L(this,G).update(r=>(r.players.forEach((n,a)=>{r.players[a].triggers=-1,r.players[a].loadedBulletInSlot=xe(5)}),r))},randomWinner:()=>{L(this,G).update(r=>(r.winner=r.players.length-1,r))},resetWinner:()=>{L(this,G).update(r=>(r.winner=-1,r))}};window.GrinchsBarDebug=t}addPlayer(){L(this,G).update(t=>(t.players.length<8&&t.players.push({name:"",triggers:-1,loadedBulletInSlot:0}),t))}updatePlayerName(t,r){L(this,G).update(n=>(n.players[t].name=r,n))}removePlayer(t){L(this,G).update(r=>(r.players.length===1?r.players[0].name="":r.players.splice(t,1),r))}getCardsAmountByPlayersAmount(t){const a=Math.floor(t*5/4),i=Math.ceil(t/2),s=Math.ceil(t/4);return{[N.King]:a,[N.Queen]:a,[N.Jack]:a,[N.Ace]:a,[N.Joker]:i,[N.Devil]:s}}async startGame(){const t=this.$();t.gameState!==se.InProcess&&(t.players.length<2||t.players.some(r=>!r.name)||(t.gameState===se.GameEnded&&Fr(),L(this,G).update(r=>(r.winner=-1,r.gameState=se.InProcess,r.cardsInGame=this.getCardsAmountByPlayersAmount(r.players.length),r.players.forEach((n,a)=>{r.players[a].triggers=-1,r.players[a].loadedBulletInSlot=xe(5)}),r)),await Dr(),Wt("gameStart"),await qr(),Lr(),Pt(this.$().cardOfTheRound)))}async exitGame(){this.$().gameState!==se.Preperation&&(L(this,G).update(r=>(r.gameState=se.Preperation,r)),Fr(),await B(2),Nr())}async lastPlayerWon(){const r=this.$().players.map((n,a)=>({...n,index:a})).filter(({triggers:n,loadedBulletInSlot:a})=>n<a);r.length>1||(await B(.5),Wt("gameEnd"),L(this,G).update(n=>(n.gameState=se.GameEnded,n.winner=r[0].index,n)))}async playerDied(t){const n=this.$().players.filter(a=>a.triggers<a.loadedBulletInSlot);await B(1),n.length<2?this.lastPlayerWon():(t&&(Ee("playerDead"),await B(2)),xt(this,Ze,Zt).call(this))}async playerLied(t){const n=this.$().players[t];if(n.triggers>=n.loadedBulletInSlot)return;const a=n.triggers+1===n.loadedBulletInSlot;await Gr("liar",[[a,()=>{L(this,G).update(i=>(i.players[t].triggers+=1,i))}]],a&&n.loadedBulletInSlot===5),await this.playerDied(a)}async devilCard(t){const r=this.$(),a=r.players.map((s,l)=>({...s,index:l})).filter(s=>s.index!==t&&s.triggers<s.loadedBulletInSlot);if(a.length<1)return;let i=!1;await Gr("devil",a.map(({index:s})=>{const l=r.players[s],c=l.triggers+1===l.loadedBulletInSlot;return c&&(i=!0),[c,()=>{L(this,G).update(f=>(f.players[s].triggers+=1,f))}]})),await this.playerDied(i)}}G=new WeakMap,Ze=new WeakSet,Zt=function(){L(this,G).update(t=>{const r=Object.keys(N),n=xe(r.length-3);return t.cardOfTheRound=r[n],Pt(t.cardOfTheRound),t})};const j=new oi,yr=V(!1),Lr=()=>{yr.set(!0)},Fr=()=>{yr.set(!1)};async function Pt(e){Qt.set(!0),await B(2),Xt.set(!0),Cn.set(e),await B(.65),Ee("singleCardFlip"),Qt.set(!1),await B(2),Xt.set(!1)}const Qt=V(!0),Xt=V(!1),Cn=V(N.King),Tt=V(null);var li=T('<img src="/boom.png" alt="BOOM" class="svelte-1l7z6li">'),ui=T('<div class="player-revolver-slot svelte-1l7z6li"><!></div>'),ci=T('<button class="player svelte-1l7z6li"><div class="border svelte-1l7z6li"></div> <span class="player-name svelte-1l7z6li"> </span> <div class="player-revolver-chamber svelte-1l7z6li"></div></button>'),fi=T('<div class="game-menu-actions svelte-1l7z6li"><button class="button-3d red svelte-1l7z6li"><span class="svelte-1l7z6li">Exit</span></button></div>'),di=T('<img src="/boom.png" alt="BOOM" class="svelte-1l7z6li">'),vi=T('<div class="player-revolver-slot svelte-1l7z6li"><!></div>'),pi=T('<div class="game-winner-container modal-container svelte-1l7z6li"><div class="game-winner modal svelte-1l7z6li"><div class="player-wrapper svelte-1l7z6li"><div class="player svelte-1l7z6li"><div class="border svelte-1l7z6li"></div> <span class="player-name svelte-1l7z6li"> </span> <div class="player-revolver-chamber svelte-1l7z6li"></div> <img class="crown svelte-1l7z6li" src="/crown.png" alt="crown"></div></div> <div class="actions svelte-1l7z6li"><button class="button-3d red svelte-1l7z6li">Exit</button> <button class="button-3d solid-green svelte-1l7z6li">Next Game</button></div></div></div>'),_i=T(`<div id="GameBoard" class="svelte-1l7z6li"><div id="CardOfTheRound" class="svelte-1l7z6li"><div class="playing-card-wrapper svelte-1l7z6li"><div class="playing-card svelte-1l7z6li"><div class="front svelte-1l7z6li"></div> <div class="back svelte-1l7z6li" style="background-image: url('/playing_card/back.png')"></div></div></div></div> <div class="game-actions svelte-1l7z6li"><button class="trigger button-3d no-underline svelte-1l7z6li">Liar❗</button> <button class="devil-card button-3d no-underline svelte-1l7z6li">Devil card used 👹</button></div> <div class="players svelte-1l7z6li"></div> <!></div> <!>`,1),hi=T("<!> <!>",1);function gi(e,t){Se(t,!1);const r=nt(),n=()=>D(j,"$GrinchsBar",r),a=()=>D(Tt,"$selectPlayerAction",r),i=()=>D(y,"$playerCardElPos",r),s=()=>D(yr,"$gameBoardVisible",r),l=()=>D(Xt,"$cardOfTheRoundNewCardAnim",r),c=()=>D(Qt,"$cardOfTheRoundFlipped",r),f=()=>D(Cn,"$cardOfTheRound",r),u=rr();function d(_){Tt.set(a()!==null?null:_)}function o(_){switch(a()){case"liar":{j.playerLied(_);break}case"devil":{j.devilCard(_);break}}Tt.set(null)}function p(_){return{duration:1e3,easing:H,css:w=>`opacity: ${w}; transform: scale(${.75+.25*w});`}}function v(_){return{duration:1500,easing:H,css:w=>`opacity: ${w}; transform: translateY(${6-6*w}rem) scale(${.85+.15*w});`}}const y=V({});function g(_,{isWinner:w,playerIndex:R}){if(!w)return{};const[z,k]=i()[R],Y=window.innerHeight/2-_.offsetHeight/2-65,J=window.innerWidth/2-_.offsetWidth/2,q=k-Y,M=z-J;return{duration:1500,easing:H,css:Z=>`z-index: 999; position: absolute; left: 0px; top: 0px;transform: translate(${J+M*Z}px, ${Y+q*Z}px);`}}or(()=>n(),()=>{et(u,n().winner!==-1?n().players[n().winner]:null)}),lr(),Te();var m=hi(),h=$e(m);si(h,{});var A=x(h,2);X(A,s,_=>{var w=_i(),R=$e(w),z=S(R),k=S(z),Y=S(k),J=S(Y),q=x(z,2),M=S(q),Z=x(M,2),_e=x(q,2);qe(_e,15,()=>n().players.filter((te,P)=>P!==n().winner),te=>te.name,(te,P,re)=>{var K=ci();const ke=Cr(()=>b(P).triggers===b(P).loadedBulletInSlot),st=Cr(()=>b(re)===n().winner);var ot=x(S(K),2),lt=S(ot),Ct=x(ot,2);qe(Ct,4,()=>Array.from({length:6}),gt,(Ie,ze,he)=>{var Me=ui(),wr=S(Me);X(wr,()=>he===b(P).loadedBulletInSlot&&he<=b(P).triggers,ge=>{var Be=li();O(ge,Be)}),oe(()=>{ne(Me,"clear",he!==b(P).loadedBulletInSlot&&he<=b(P).triggers),ne(Me,"peng",he===b(P).loadedBulletInSlot&&he<=b(P).triggers)}),O(Ie,Me)}),oe(()=>{K.disabled=b(ke),ne(K,"dead",b(ke)),ye(K,"background-image",`url('/player${(b(ke)?"_dead":"")??""}.png')`),ye(K,"animation-delay",`${b(re)*30}ms`),Vt(lt,b(P).name)}),bn(K,()=>Sn,()=>({duration:1500,easing:H})),E(5,K,()=>ve,()=>({duration:1e3,delay:25*b(re)})),W("introend",K,Ie=>{y.update(ze=>(ze[b(re)]=[Ie.currentTarget.offsetLeft,Ie.currentTarget.offsetTop],ze))}),E(2,K,()=>g,()=>({isWinner:b(st),playerIndex:b(re)})),W("click",K,()=>o(b(re))),O(te,K)});var at=x(_e,2);X(at,()=>n().winner===-1,te=>{var P=fi(),re=S(P);W("click",re,()=>j.exitGame()),E(2,P,()=>ve,()=>({duration:1e3})),O(te,P)});var it=x(R,2);X(it,()=>b(u)!==null,te=>{var P=pi(),re=S(P),K=S(re),ke=S(K);ye(ke,"background-image","url('/player.png')");var st=x(S(ke),2),ot=S(st),lt=x(st,2);qe(lt,4,()=>Array.from({length:6}),gt,(Me,wr,ge)=>{var Be=vi(),kn=S(Be);X(kn,()=>ge===b(u).loadedBulletInSlot&&ge<=b(u).triggers,xn=>{var On=di();O(xn,On)}),oe(()=>{ne(Be,"clear",ge!==b(u).loadedBulletInSlot&&ge<=b(u).triggers),ne(Be,"peng",ge===b(u).loadedBulletInSlot&&ge<=b(u).triggers)}),O(Me,Be)});var Ct=x(lt,2),Ie=x(K,2),ze=S(Ie),he=x(ze,2);oe(()=>Vt(ot,b(u).name)),E(5,Ct,()=>ve,()=>({delay:2e3,duration:1e3,easing:Da})),E(5,ke,()=>ee,()=>({delay:1500,duration:1})),W("click",ze,()=>j.exitGame()),W("click",he,()=>j.startGame()),E(5,re,()=>v),E(5,P,()=>ee,()=>({easing:H,duration:1e3})),E(6,P,()=>ee,()=>({easing:H,duration:500})),O(te,P)}),oe(()=>{ne(k,"new-card-anim",l()),ne(Y,"flipped",c()),yn(J,"style",`background-image: url('/playing_card/${f()??""}.png')`),M.disabled=a()==="devil",ne(M,"active",a()==="liar"),Z.disabled=a()==="liar",ne(Z,"active",a()==="devil"),ne(_e,"selecting",a()!==null)}),E(5,z,()=>p),E(5,M,()=>ve,()=>({duration:1e3})),W("click",M,()=>d("liar")),E(5,Z,()=>ve,()=>({duration:1e3})),W("click",Z,()=>d("devil")),E(1,R,()=>ee,()=>({duration:1e3})),E(2,R,()=>ee,()=>({duration:500})),O(_,w)}),O(e,m),Ce()}var mi=T('<div class="modal-container user-consent svelte-rvnfg2"><div class="modal svelte-rvnfg2"><h1 class="svelte-rvnfg2"><span>Click</span> <span style="opacity: 0.5">anywhere</span> <span>to start</span> <span style="opacity: 0.5">the game</span></h1></div></div>'),yi=T("<!> <!> <!>",1),wi=T("<!> <!>",1);function bi(e,t){Se(t,!1);const r=nt(),n=()=>D(j,"$GrinchsBar",r);Te();var a=wi();W("click",Xr.body,En(()=>j.consentOfUserGiven()));var i=$e(a);Ga(i,{});var s=x(i,2);X(s,()=>!n().userConsentForSound,l=>{var c=mi();O(l,c)},l=>{var c=yi(),f=$e(c);Ya(f,{});var u=x(f,2);ri(u,{});var d=x(u,2);gi(d,{}),O(l,c)}),O(e,a),Ce()}Ea(bi,{target:document.body});
